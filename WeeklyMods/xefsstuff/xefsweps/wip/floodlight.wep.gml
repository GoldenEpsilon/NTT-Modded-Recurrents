#define init
global.sprSnpF0 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAKlBMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzr///8v4yAdAAAAAXRSTlMAQObYZgAAAHdJREFUeNplkAEOwyAIAAWcVvT/792BbTqzU4hwRBPLgSTlRNgj2UYetqg1BBXFhDFspnUXmPNHoMju1JaibYxF7j1yviOfgHMzVXVXaE2if3GrjYUw7V2NASkp0LaWGwO1SvAIuUVL6KbAXPnGIYiX90uIf3b/C9u9BDtUK39BAAAAAElFTkSuQmCC", 4, 4);
global.sprSnpF1 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAKlBMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzr///8v4yAdAAAAAXRSTlMAQObYZgAAAHlJREFUeNplkI0OBBEMBpfPWcX7P+9N22zcz0QbOlS4vijB9VNk9CBNeUjRGoIiYQvMtMLO6XmtD4Eiz8laIXqiLjLCs5k3fjnMu2qt912Be7w+6CrbCLkQG/LAQGvvKTa0VpxHlBTnHSEwI+8o3kUKQRzOlxD/ZP0Nt7QECZFEkAAAAAAASUVORK5CYII=", 4, 4);
global.sprSnpF2 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAKlBMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzr///8v4yAdAAAAAXRSTlMAQObYZgAAAHtJREFUeNplkAsOhCAMBS3PRVq4/3l3CkT3M6aNvKk14fjG4PjNsipsYzczP08MIeUd3NXNEBEI6/1DoOgRnDVFXYiHfl3Z3XPxK+G9qpQSUYB1mTe2ywdCFcTA+qChNUbIqqAabGFb5LBEOgWmrX/ggRBBPTxXQvtj52+6awQIOCsM4QAAAABJRU5ErkJggg==", 4, 4);
global.sprSnpF3 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1fLyZseoSBaSKKlp7Lpzr///87FopMAAAAAXRSTlMAQObYZgAAAHhJREFUeNplkIEOhCAMxRjPmwP+/3+vQ4J32mSgbQIJ5R+D8nQ5glVsM/1xUJBMdIhQNyO0RrDef0KIlcC/ZvALuVgD+I7Igz+JEKpIbK3ulv7M02MQXHKxVyszkDVGk6WTG6xgOzhgZ6Cc1x1GmZ7A3OwnIbxZ/guEbgPaZtctuAAAAABJRU5ErkJggg==", 4, 4);
global.sprSnpF4 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAALVBMVEUAAABMVl1seoQAAAAcIiYuNz4zHA8/GRNMVl1fLyZseoSBaSKKlp7Lpzr///+5j8UxAAAAA3RSTlMAAAD6dsTeAAAAeklEQVR42oWQUQ4DIQhEuzuwHSne/7odxKb70/QZovhEiY//QHFCnDv/0OK6SlSGSBHhCUFGaMq8CanQNsn0Jdi4BhlmUq4y3fcstKZbCzMStT8AeMwSjHXAumBI+5wvB4Ikii2wxVHtHup7CZnRb0iIFoovt2/4/T1vZxsFQGTYut8AAAAASUVORK5CYII=", 4, 4);
global.sprSnpF5 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAKlBMVEUAAABMVl0AAAAcIiYuNz4zHA8/GRNMVl1fLyZseoSBaSKKlp7Lpzr///9MwI5FAAAAAnRSTlMAAHaTzTgAAAB6SURBVHjaXZAJEsMgDAMTySmo5P/vrVTSpnQ9DMbLMWZbgdn+axlD0mXwJfWhEZMVNIxUA3BODsEbfoSV5MxRb9Em5Wglu8qUix/BeSuyDMnWkHoHUDotisfBqHmgW9d5PguMIMwlsIg0EWHT5xvYafZPtzfrN9ws9Rc9uAS34dFXsgAAAABJRU5ErkJggg==", 4, 4);
global.sprSnpF6 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAKlBMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzr///8v4yAdAAAAAXRSTlMAQObYZgAAAHhJREFUeNplkAEOhCAMBC3rVSr8/703BdR4N4Qm7EAJbG8Mtt8sZ4Nl7GbkEoaQGQ0i1Fh5AzdDPiJEdeDYED4Rg7rvWSOy8ScRu1VKOY4C7pZ5pbuiI5RCbJgHKlq9nzLRSjJYwt6CNAWmzjvwYNdrH+4vQfyz8i/brAQgMekpsgAAAABJRU5ErkJggg==", 4, 4);
global.sprSnpF7 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAKlBMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzr///8v4yAdAAAAAXRSTlMAQObYZgAAAHxJREFUeNplkAEOhCAMBIXlhFL+/94bCoZ4N9oGd4QmXC9ScP2EvO6S+zLpYYo7SISUOZjJw5aSgF1HoOi9860Q90I89FpnN5sHfyasb+Wce8/AnJk3TpUNhHKtWfywNjS0xujaw+ERaQupFIk0BKbFDARsQR3OlVD/rPwLuvQEAahfywgAAAAASUVORK5CYII=", 4, 4);
global.sprSnpF8 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAMAAACEsl7iAAAAKlBMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzr///8v4yAdAAAAAXRSTlMAQObYZgAAAHdJREFUeNplkAsOwyAMQzGmoXzuf946iTZW7YlEJA/JEuUFgvIGOiNIgy9H+FLDEmNwhW0NYq0fIaU+p2aGsIRGdQnvkYPL0d1Ya+29CjP4/gbAsSXognqAEkKae09muPMRSKG81sy0DSFzZwbMSaE6nC9R/ZP7B9osBDUxr2OzAAAAAElFTkSuQmCC", 4, 4);

global.sprSnpFmsk = sprite_add_base64("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAA1BMVEUAAACnej3aAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==", 1, 0, 0);

global.SnpFGlower = noone;

#define weapon_name
return "FLOODLIGHT";

#define weapon_sprt

with(self) if (instance_exists(Player)) && ("wep" in self) && ((wep = "floodlight") || (bwep = "floodlight")) && ("SnpFframe" in self){
	if (SnpFframe = 0) return global.sprSnpF0;
	else if (SnpFframe = 1) return global.sprSnpF1;
	else if (SnpFframe = 2) return global.sprSnpF2;
	else if (SnpFframe = 3) return global.sprSnpF3;
	else if (SnpFframe = 4) return global.sprSnpF4;
	else if (SnpFframe = 5) return global.sprSnpF5;
	else if (SnpFframe = 6) return global.sprSnpF6;
	else if (SnpFframe = 7) return global.sprSnpF7;
	else if (SnpFframe = 8) return global.sprSnpF8;
}
else return global.sprSnpF4;

#define weapon_type
return 5;

#define weapon_auto
return true;

#define weapon_load
return 1;

#define weapon_cost
return 0;

#define weapon_swap
return sndSwapMachinegun;

#define weapon_area
return 18;

#define weapon_text
return "RHYTHM HELL";

#define weapon_fire

if ((ammo[5] >= 1) && (SnpFspeed < 300)) {
	SnpFspeed += 1;
}

#define step

if (argument0) {
	if "SnpFspeed" not in self {
		SnpFspeed = 0;
		SnpFrotat = 0;
		SnpFframe = 0;
	}
	
	if (button_released(index,"fire")) {
		reload = 30;
	}
	
	if ((SnpFspeed > 0.5) && (!button_check(index,"fire"))) {SnpFspeed -= (SnpFspeed)/30;}
	else if (SnpFspeed < 0.5) SnpFspeed = 0;
	
	SnpFrotat += (SnpFspeed / 300);
	if (SnpFrotat > 8) SnpFrotat -= 8;
	SnpFframe = round(SnpFrotat)
	
	if ((SnpFframe = 4)) {
		SnpFrotat += 1;
		weapon_post(1 + SnpFspeed/300, SnpFspeed/300, SnpFspeed/300);
		sound_play_pitchvol(sndExplosion, 1.25 - SnpFspeed/300, 0.25 + SnpFspeed/300);
		sound_play_pitchvol(sndLaserUpg, 5 - SnpFspeed/300, 0.5 + SnpFspeed/300);
		
		SnpFlength = 0;
		while ((!collision_line(x, y, x+lengthdir_x(SnpFlength,gunangle), y+lengthdir_y(SnpFlength,gunangle), Wall, 0, 1)) && (SnpFlength < 500)) {
			SnpFlength += 5;
		}
		
		var flamemaker = 0;
		while (flamemaker < SnpFlength) {
			flamemaker += 5;
			with instance_create(x+lengthdir_x(flamemaker,gunangle),y+lengthdir_y(flamemaker,gunangle),Flame) {
				team = other.team;
				direction = random(360);
				speed = random(2);
				image_xscale = 0.5 + 0.5*(other.SnpFspeed/300);
				image_yscale = 0.5 + 0.5*(other.SnpFspeed/300);
				damage = 1 + (other.SnpFspeed/300);
			}
		}
		
		with instance_create(x,y,CustomProjectile) {
			SnpFlength = other.SnpFlength;
			SnpFcharge = other.SnpFspeed/300;
			team = other.team
			image_angle = other.gunangle;
			mask_index = global.sprSnpFmsk;
			image_xscale = other.SnpFlength;
			image_yscale = 2+(SnpFcharge/10);
			owner = other;
			lifetime = 5;
			script_bind_step(SnpFstep, 0, id);
			
			on_hit = script_ref_create(hurt);
			on_wall = script_ref_create(nothing);
		}
		with instance_create(x,y,CustomProjectile) {
			SnpFlength = other.SnpFlength;
			SnpFcharge = other.SnpFspeed/300;
			team = other.team
			image_angle = other.gunangle;
			mask_index = global.sprSnpFmsk;
			image_xscale = other.SnpFlength;
			image_yscale = -2-(SnpFcharge/10);
			owner = other;
			lifetime = 5;
			script_bind_step(SnpFstep, 0, id);
			
			on_hit = script_ref_create(hurt);
			on_wall = script_ref_create(nothing);
		}
		
		if !instance_exists(global.SnpFGlower) {
			global.SnpFGlower = instance_create(0, 0, CustomObject);
			with(global.SnpFGlower){
				script_bind_draw(draw_SnpFglow, depth-0.1);
			}
		}
	}
}

#define SnpFstep(Me)
with(Me){
	
	if (lifetime <= 0) {
		instance_destroy();
	} else {
		lifetime -= 1;
	}
}
if (!instance_exists(Me)) {
	instance_destroy();
}

#define draw_SnpFglow
with(CustomProjectile) if ("SnpFcharge" in self) {
	draw_set_blend_mode(bm_add);
	draw_set_alpha(0.1);
	draw_line_width_colour(x, y, x+lengthdir_x(SnpFlength,image_angle), y+lengthdir_y(SnpFlength,image_angle), (8+(SnpFcharge/4))*(lifetime/5)*3, c_red, c_red);
	
	draw_set_alpha(0.5);
	draw_line_width_colour(x, y, x+lengthdir_x(SnpFlength,image_angle), y+lengthdir_y(SnpFlength,image_angle), (7.5+(SnpFcharge/4))*(lifetime/5), c_red, c_red);
	
	draw_set_alpha(5);
	draw_line_width_colour(x, y, x+lengthdir_x(SnpFlength,image_angle), y+lengthdir_y(SnpFlength,image_angle), (6+(SnpFcharge/4))*(lifetime/5), c_orange, c_orange);
	draw_line_width_colour(x, y, x+lengthdir_x(SnpFlength,image_angle), y+lengthdir_y(SnpFlength,image_angle), (4+(SnpFcharge/4))*(lifetime/5), c_white, c_white);
	
	draw_set_blend_mode(bm_normal);
	draw_set_alpha(1);
}

#define hurt
if (lifetime = 5) projectile_hit(other, SnpFcharge*2, 0, 0)

#define nothing