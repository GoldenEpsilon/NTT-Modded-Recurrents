#define init
global.sprWrb_Small = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAAC4AAAAQCAMAAABeF73YAAAAHlBMVEUAAAAAAAAdGhcdGyMvLjQyLitITDxRUFh5fmuqr5cch9ozAAAAAXRSTlMAQObYZgAAAFZJREFUeAHd0MERAyAIRNEAKyz9N5zIjchYgM+Ts/+in6fIz33vV8BkVjMpTQSYzH9Mys4zdekquk9EMCfVC6kNAOfId+4uDWBOP9uqz6eamcwuH/meL1ZDBFH8we9hAAAAAElFTkSuQmCC", 8, 8);

global.sprWrb_Small_flash0 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAAC4AAAAQCAMAAABeF73YAAAAJFBMVEUAAAAAAAAdGhcdGyMvLjQyLitITDxRUFh5fmuS/9Cqr5f///++YXj1AAAAAXRSTlMAQObYZgAAAFVJREFUeNrd0EEOwCAIBMAKqyz0//9t9YZRH+BwIhACPFcpv3M9p4D6u+KjTJbEDAzGjEHv7RFSpQ7Sw8wYS/QxXRIAp/bWSgLobpnVqaq7U7ePvNEHxGEGvtLDms8AAAAASUVORK5CYII=", 8, 8);

global.sprWrb_Small_flash1 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAAC4AAAAQCAMAAABeF73YAAAAJ1BMVEUAAAAAAAAdGhcdGyMn6oMvLjQyLitITDxRUFh5fmuS/9Cqr5f///9hyk0eAAAAAXRSTlMAQObYZgAAAF1JREFUeNrd0MsRwCAIBcAIPAVJ//VGOYWMpgDXE59xgOsoZfiv5xBgkd77/TZikSiblUQV5uZfIyez3Z0q1UDzqar5kkn8TgmAZkvR3lpJAN4Ns1qVebfq9pAnegDwOAbWH5nizAAAAABJRU5ErkJggg==", 8, 8);

global.sprWrb_Small_flash2 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAAC4AAAAQCAMAAABeF73YAAAAJFBMVEUAAAAAAAAdGhcdGyMn6oMvLjQyLitITDxRUFh5fmuS/9Cqr5cE4l6cAAAAAXRSTlMAQObYZgAAAF1JREFUeNrd0EsOgDAIBFBbGGHk/vfVsjGY1gP0seITEji20h7//ZoCoul6aco22Qp3MBhfDOoYj+hnP1Mf4e6MKWpu7wUA41SOm7UCEKORdfGo6OxUkdWpy0fu6AYHcAYw7xnEcQAAAABJRU5ErkJggg==", 8, 8);

global.sprWrb_Small_flash3 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAAC4AAAAQCAMAAABeF73YAAAAJFBMVEUAAAAAAAAAbUUdGhcdGyMn6oMvLjQyLitITDxRUFh5fmuqr5c0Il41AAAAAXRSTlMAQObYZgAAAF5JREFUeAHd0EESAyEIRNEQSA80979vpqeyIWV5AJ8r5W/wdRS77efzCsRbPoNenjFpQxXY7H9sqrduv/x6uE5VsZfUG+kDgOSa8kwbgEgmpX94S9WLVSN2q+4/8iBfsbAF83d9JOIAAAAASUVORK5CYII=", 8, 8);

global.sprWrb_Large = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAADgAAAAQCAMAAAB0p0x3AAAAHlBMVEUAAAAAAAAdGhcdGyMvLjQyLitITDxRUFh5fmuqr5cch9ozAAAAAXRSTlMAQObYZgAAAFlJREFUeAHt0TEOgDAIhWEpT3jc/8JSHZpIJO76sRH+pd2+StKbq7oCVFrziJTCHQzGzdowS4kY+5zTuMbdGZ0shRwFAGPHMjSTAlBjTW11D4+jqtJqv+N3AKO8BWtS2tOPAAAAAElFTkSuQmCC", 14, 8);

global.sprWrb_Large_flash0 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAADgAAAAQCAMAAAB0p0x3AAAAJFBMVEUAAAAAAAAdGhcdGyMvLjQyLitITDxRUFh5fmuS/9Cqr5f///++YXj1AAAAAXRSTlMAQObYZgAAAFpJREFUeNrt0dEOgCAIBVCVm1zo//83ta2HWNp7HV4cg8kgfVVu3lTFFCC2T1gvInOgCjr9jtfDWqN72XoM5QxVpc/Q+o8lALBurDUHgCxGfViOyGI5s3P80gEHNAiOVKEUxwAAAABJRU5ErkJggg==", 14, 8);

global.sprWrb_Large_flash1 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAADgAAAAQCAMAAAB0p0x3AAAAJ1BMVEUAAAAAAAAdGhcdGyMn6oMvLjQyLitITDxRUFh5fmuS/9Cqr5f///9hyk0eAAAAAXRSTlMAQObYZgAAAGBJREFUeNrt0cEOgCAIBmAV/gTp/Z83qa1DlHavjwtjMBymr8rdm65YAoi5tbbe6GVmb1LNgQjU1K70TLgPmpXFY1eOEBG1EWXfWAIAVUd8sNYcADR56sNxiCbHGX3HL21yuQjE/78VhgAAAABJRU5ErkJggg==", 14, 8);

global.sprWrb_Large_flash2 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAADgAAAAQCAMAAAB0p0x3AAAAJFBMVEUAAAAAAAAdGhcdGyMn6oMvLjQyLitITDxRUFh5fmuS/9Cqr5cE4l6cAAAAAXRSTlMAQObYZgAAAGFJREFUeNrt0UEOgDAIBMBSirDy//8qbeJBtHrX4UIaNiG0fBXt3kzlJxFu3Zq0LoYASswEDj/D0exJcq9LVFdHmRl8IpIE1EREFDMRVKVEhBUKXK06cjfHYX44zuw7fmUDJ1YIAsebVlQAAAAASUVORK5CYII=", 14, 8);

global.sprWrb_Large_flash3 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAADgAAAAQCAMAAAB0p0x3AAAAJFBMVEUAAAAAAAAAbUUdGhcdGyMn6oMvLjQyLitITDxRUFh5fmuqr5c0Il41AAAAAXRSTlMAQObYZgAAAGJJREFUeNrt0d0OgCAIBWB/iODw/u+b5OZWlHVfHzfOcSbD9FW5edMVr5ipuOVCcd4E5ECVYbAzjENpQbO6eu1qL1WFzaD4izVgZsGMB0VywEyCHj2OOnI3yyF6WM7sO35pA1WwB4gfJrIZAAAAAElFTkSuQmCC", 14, 8);

global.sprWrb_Back = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAJ1BMVEUAAAB5fmuqr5cAAAAdGhcdGyMvLjQyLitITDxRUFh5fmuqr5f///9wwQ7LAAAAA3RSTlMAAAD6dsTeAAAAUElEQVR42s3PQQqAMAxE0eg0Y9Pe/76mYITBhUt9JbtPSO2XkExAOXkHK91B4YxAGQMGhvCcdlxvzgycwnNaWRs2uMoCpXc8j8xEjnz/5vdOodUDeUtw4rQAAAAASUVORK5CYII=", 7, 8);

#define weapon_name
return "WARBLER";

#define weapon_sprt

if !instance_exists(Player){
	return global.sprWrb_Small;
}
else if (wep != "warbler"){
	return global.sprWrb_Back;
}
else {
	if (skill_get(13)=1){
		with(Player) if "wkick" in self {
			if (wkick <= -12){return global.sprWrb_Large_flash0;}
			else if (wkick < -6){return global.sprWrb_Large_flash1;}
			else if (wkick < -3){return global.sprWrb_Large_flash2;}
			else if (wkick < 0){return global.sprWrb_Large_flash3;}
			else {return global.sprWrb_Large;}
		}
	}
	else {
		with(Player) if "wkick" in self {
			if (wkick <= -12){return global.sprWrb_Small_flash0;}
			else if (wkick < -6){return global.sprWrb_Small_flash1;}
			else if (wkick < -3){return global.sprWrb_Small_flash2;}
			else if (wkick < 0){return global.sprWrb_Small_flash3;}
			else {return global.sprWrb_Small;}
		}
	}
}

#define weapon_type
return 0;

#define weapon_auto
return false;

#define weapon_melee
return 0;

#define weapon_load
return 25;

#define weapon_cost
return 0;

#define weapon_swap
return sndSwapHammer;

#define weapon_area
return 10;

#define weapon_text
return "SLICE";

#define weapon_fire

if (skill_get(13)=1){
	wkick = -18;
}
else{
	wkick = -15;
}

motion_add(other.gunangle,4);
sound_play_gun(sndEnergySword, 0.5, 0.2);

lastangle = gunangle;

#define game_start
other.movdmg = 0;

#define step

if (wep = "warbler"){

	other.movdmg = 8;

	if other.speed > 4 {
		other.movdmg += 2;
	}
	
	if (wkick < 0){

		if abs(gunangle - lastangle) > 7.5 {
			with instance_create(x+lengthdir_x(30 - wkick + 4*skill_get(13),gunangle),y+lengthdir_y(38 - wkick + 4*skill_get(13),gunangle),Dust){
				speed = 2;
				direction = other.gunangle + random(45) - 22.5;
			}
			other.movdmg += 2;
		}
		
		lastangle = gunangle;

		x11 = x+lengthdir_x(2,gunangle+90);
		y11 = y+lengthdir_y(2,gunangle+90);
		x21 = x+lengthdir_x(38 - wkick + 4*skill_get(13),gunangle)+lengthdir_x(2,gunangle+90);
		y21 = y+lengthdir_y(38 - wkick + 4*skill_get(13),gunangle)+lengthdir_y(2,gunangle+90);

		x12 = x+lengthdir_x(12,gunangle)+lengthdir_x(3,gunangle-90);
		y12 = y+lengthdir_y(12,gunangle)+lengthdir_y(3,gunangle-90);
		x22 = x+lengthdir_x(38 - wkick + 4*skill_get(13),gunangle)+lengthdir_x(2,gunangle-90);
		y22 = y+lengthdir_y(38 - wkick + 4*skill_get(13),gunangle)+lengthdir_y(2,gunangle-90);
	
		with (collision_line(x11,y11,x21,y21,hitme,0,0)) if(team != other.team && sprite_index != spr_hurt){
			if (other.movdmg >= 1){
				sound_play(snd_hurt);
				sprite_index = spr_hurt;
				image_index = 0;
				my_health -= other.movdmg;
				//motion_add(other.gunangle,5 * (10 / maxhealth));
			}
		}
		with (collision_line(x12,y12,x22,y22,hitme,0,0)) if(team != other.team && sprite_index != spr_hurt){
			if (other.movdmg >= 1){
				sound_play(snd_hurt);
				sprite_index = spr_hurt;
				image_index = 0;
				my_health -= other.movdmg;
				//motion_add(other.gunangle,5 * (10 / maxhealth));
			}
		}
	}
	if (wkick < 0){
		with(collision_line(x11,y11,x21,y21,projectile,0,0)) if(team != other.team){
			instance_destroy();
		}
		with(collision_line(x12,y12,x22,y22,projectile,0,0)) if(team != other.team){
			instance_destroy();
		}
	}

}