#define init
global.sprThunderCloudCannon_0 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAGFBMVEUAAAAAAAAiERA0IR5HLy1OYHRnRD+QpLT+OupDAAAAAXRSTlMAQObYZgAAAHpJREFUeAGtzzuOhDAYA2D8wHv/G2+sEBEKRlPMV0QurN/K8Q28uwrn35sTs+Fs/MhXo6iBlZpB2W7YKctlSrTl1RgSl5TGtJHIGK6ZhNPeYLfXfxJAIh6N7cNdgiQS1t24T8wliqi1b20nCiSxBkfo84RhDR6ftfhr/5lxBCZ+rZ/tAAAAAElFTkSuQmCC", 8, 5);
global.sprThunderCloudCannon_1 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAGFBMVEUAAAAAAAAiERA0IR5HLy1OYHRnRD+QpLT+OupDAAAAAXRSTlMAQObYZgAAAH5JREFUeAGtz8EOgzAMA1CSuN7///HsQkV6YNqBd0AFWTY9/hHPrsD4PBlnJMAG2znukSxJo6l2kMXWAdBQmFKgl5UQElZFH6nKJJWQa4bMU0+kt9d9yAh9jS3RLuylmL8aqDvRKuZSqsLWPqpVWKQa1qAOfuxC1uDxm4Kv+wKuvAQ0UTx2IQAAAABJRU5ErkJggg==", 8, 5);
global.sprThunderCloudCannon_2 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAIJJREFUeAGtkFEOwzAIQ+sU8O5/4pkkqExap330/QUZv9LjH3DPDsTrjsBKOBv94cQlGSZGwkS1QRpbh/vaMp+cEafrUQmRGWGWGucqU0JsDTkWOyFljqSue0hAU3wk2sFpwvxUuF2JVjFNQxVJ+d1aRYKhhhJi7nz59yU8fqPg47wBo9ME69hnz2AAAAAASUVORK5CYII=", 8, 5);
global.sprThunderCloudCannon_3 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAINJREFUeAGtzzGyhDAMA1BkrOjf/8RfJngSCna22FcwLjQSOb6Bd3dg/L0ZmAlqw8eNNRJpUVRcO6TU1kGqMHkZRiY7YRJLpurUOcYpOWH3jBTTTMy5qO1+jwRkBjrhW9oeXEu4fhXMlVgVcykyUHqfuVUUeBo96KM+T7AePD5z8Of+AbP9BPdBtiO8AAAAAElFTkSuQmCC", 8, 5);
global.sprThunderCloudCannon_4 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAIRJREFUeAGtz8EOgzAMA1Bc4nr//8VzQqOyA9MOe6dIWDY9foFnKzBfTyauBHXDjxt7ZISNpOTaKYVuHaQSgyUTZLATJjFFKE9Nk5ywNSONy5U45zylkdv9HgmIGFiJymo/uJZQvwpGJXxLu8LqOQOp9xm7osDF6EEf/XWD9eDxnYN/9wbICQUHz5stwwAAAABJRU5ErkJggg==", 8, 5);
global.sprThunderCloudCannon_5 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAIJJREFUeAGt0EGuw0AIA9CY4PG//4k/noCUSk3VRd9qFgaHHN/Asw6svycLV4K64cu7ExZZwmSr5qXUbQcpY3JzgkxOoki0TPk5O4jSNVJcOlGkcPfcIwGZgU6ca53SHNxN2J8KphNRpFmx7XMCNv3MXjEQEZhC7Jk3/34Kj88c/LV/2fUFF3Ko8lgAAAAASUVORK5CYII=", 8, 5);
global.sprThunderCloudCannon_6 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAHlBMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLT///92cBK8AAAAAXRSTlMAQObYZgAAAIJJREFUeAGtz7EOg0AMA1AS7Lj//8WNOU5KB6oOfQPKYNnc8Yt4dgfq9aRiJaiB89adsERLk3VtSdDoIGUEL06Q4E40iQbIp6pJYLR7RsplJdZKenu/R4oAMnJ2jAd7Ka5fDcKJs+qURsW1lMiwvU+MCovMjD3Yhz+fou3B4zsH/+0N56EFJ+tMRB8AAAAASUVORK5CYII=", 8, 5);
global.sprThunderCloudCannon_7 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAH9JREFUeAGt0MEOgzAMA1Ac4nr//8Wr20bKYUw77J1AsmzC9Qs8O4HxejKwE1TTX6iTsMgpTDZrh5RqHaSMycUJMlmJSaJlyo/VQUxnRortJCYpvF33SEBmIHpHO9hLWJ8KZuuoClvnBMz79xg3s1UYIgI1uH349zV4fefgv70B/BYFQZjayVcAAAAASUVORK5CYII=", 8, 5);
global.sprThunderCloudCannon_8 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAIBJREFUeAGtz8EOg2AIA+AVKd37P/GoSsbFZId9J8lPWnn9As/uhXo/KVwb1LIHCt+SyBYm69iSUiuDlDF58gZ7mI0m0TLlz8kg2l0jxeXeaFK4e+6RgMxA7Ix1sJtw/iqYK2Mi7DwnYO6vxlwRhuiEKTyqjv06KZjCGR702999AAolBVkzj3CtAAAAAElFTkSuQmCC", 8, 5);
global.sprThunderCloudCannon_9 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAIRJREFUeNqt0cEOhEAIA9AtAvX/v3jLCMl40Oxh32l0miLx8ws860CeTxJXIriJ27kTxVyssKg2SefWEcESHkslQg+TEF0Wd9ZxOgLSY0i7dEL0qmbPPiTgbrC9oxeeSVifivCtY1W0tY6h1PyU8K4YMDXMwJR1u4PMQByZB15+U8f/6AsV1gVzyQR4JgAAAABJRU5ErkJggg==", 8, 5);
global.sprThunderCloudCannon_X = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAACEAAAAQCAMAAACvHOZVAAAAHlBMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLSYrr/ulOKcAAAAAXRSTlMAQObYZgAAAINJREFUeAGNz9EOhTAMAlCpZdz//+JbdE36ssTz5BIC9voCZzuwfifrjYAa5oPaCYssYbKqXVJqdJAyJh9OsB6dKBItU/7sDqLsGSleO1Gk8HbfIwGZgZgd42Av4flVMEdHV9hzTsC87wRzVBgiAj3oBPyaUHrwTVwnFcS91n1KjMLP/h4TBY3ZynoxAAAAAElFTkSuQmCC", 8, 5);

global.sprTCCBigBullet = sprite_add_base64("iVBORw0KGgoAAAANSUhEUgAAAGAAAAAYCAMAAAAyNwimAAAAD1BMVEUAAAArOU9PY3mYrr////9HCYK+AAAAAXRSTlMAQObYZgAAAMdJREFUeAG1llGKgDAMBTvj/e+8EFyTNSylQvKl72OGtDZ1PWXUGir1ihpyeJV6GVClBJt8AXT+fwa8Mxo+4pbnQ+d3A5aQpm0Kuqvzi4G/KWuV3Kg0JxLqa+enwQoqjRkpgJp5q52Amx+c0gJlYdCnBd57wEZgLjFhMBugbocnDaSB5P8auJEWZLZwKjAEyYk0G2gt0OHsBRTOXsCLPi+YX6L5TZ78TL8fNE8O2vyo+DLsPBl238a1B+N6/sKZvzLnL/3B35YfGQEJiANK+5IAAAAASUVORK5CYII=",4,12,12);
global.sprTCCBullet = sprite_add_base64("iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAMAAACROYkbAAAADFBMVEUAAAArOU9PY3mYrr+zfeouAAAAAXRSTlMAQObYZgAAAGNJREFUeAHlkzEWgDAIQ/nx/ne2VeGlI4/RvyWGDBZigx6IFxY6LAKC1ObV+LX4vsOSibC8ShdbWl4i6xJ5WqUdz0utgnQNAc0CnQWKdkFlc4D/FUx/4vgZx4s0X+XhMY3P+QYLsQVRZWlBggAAAABJRU5ErkJggg==",4,8,8);

global.TCCBulletGlower = noone;

#define weapon_name
return "THUNDER CLOUD CANNON";

#define weapon_sprt
with(self) if (instance_exists(Player)) && ("wep" in self) && ((wep = "thunder cloud cannon") || (bwep = "thunder cloud cannon")) && ("TCCAmmo" in self) && (TCCAmmo < 9.5){
	if TCCAmmo > 8.5 return global.sprThunderCloudCannon_9;
	else if TCCAmmo > 7.5 return global.sprThunderCloudCannon_8;
	else if TCCAmmo > 6.5 return global.sprThunderCloudCannon_7;
	else if TCCAmmo > 5.5 return global.sprThunderCloudCannon_6;
	else if TCCAmmo > 4.5 return global.sprThunderCloudCannon_5;
	else if TCCAmmo > 3.5 return global.sprThunderCloudCannon_4;
	else if TCCAmmo > 2.5 return global.sprThunderCloudCannon_3;
	else if TCCAmmo > 1.5 return global.sprThunderCloudCannon_2;
	else if TCCAmmo > 0.5 return global.sprThunderCloudCannon_1;
	else return global.sprThunderCloudCannon_0;
}
else return global.sprThunderCloudCannon_X;

#define weapon_type
return 0;

#define weapon_melee
return false;

#define weapon_auto
return true;

#define weapon_load
return 15;

#define weapon_cost
return 0;

#define weapon_swap
return sndSwapMachinegun;

#define weapon_area
return 33;

#define weapon_text
return "EYE OF THE STORM";

#define weapon_fire
if TCCAmmo >= 4 {
	if !instance_exists(global.TCCBulletGlower) {
		global.TCCBulletGlower = instance_create(0, 0, CustomObject);
		with(global.TCCBulletGlower){
			script_bind_draw(TCCBulletGlow, 0.1);
		}
	}
	with instance_create(x+lengthdir_x(2, gunangle),y+lengthdir_y(2, gunangle),CustomProjectile){
		motion_add(other.gunangle + random_range(-5,5)*other.accuracy,12 + 2*skill_get(13));
		image_angle = direction;

		team = other.team;
		creator = other;

		sprite_index = global.sprTCCBigBullet;
		mask_index = mskBullet1;
		
		damage = 10;
		force = 4;
		
		on_hit = script_ref_create(TCCHurt);
		on_wall = script_ref_create(TCCWall);
		on_destroy = script_ref_create(TCCPop);
		
		image_xscale = 1.25;
		image_yscale = 1.25;
		
		canthurt = noone;
		hurttime = -1;
		
		time = 8;
		
		script_bind_step(TCCBbullet, 0, id);
	}
	sound_play_gun(sndOasisShoot, 0.25, 0.5);
	motion_add(other.gunangle,-2)
	wkick = 17;

	TCCAmmo -= 4;
	
}
else with instance_create(x,y,PopupText){
	mytext = "EMPTY";
	time = 15;
}
wkick = 16;

#define step
with(Player) if (wep = "thunder cloud cannon") || (bwep = "thunder cloud cannon") {
	if "TCCAmmo" not in self TCCAmmo = 10 + 10*skill_get(10);
	
	if (((wep = "thunder cloud cannon") && wkick <= 0) || (wep != "thunder cloud cannon")) && (TCCAmmo < 10 + 10*skill_get(10)) {
		TCCAmmo += 0.04;
	}
}

#define TCCBbullet(Me)
with(Me) {
	image_angle += 10;

	if speed > 0 speed -= speed/10;
	
	if (speed > 1) && ((image_index > 1) && (image_index < 2)) image_speed = 0;
	else image_speed = 0.5;
	
	time += 1;
	if time = 14 {
		time = 0;
		sound_play_pitchvol(sndLightningPistol, random_range(2, 4), 0.4);
		with instance_create(x+lengthdir_x(speed*3,direction),y+lengthdir_y(speed*3,direction),Lightning){
			move_contact_solid(other.direction + 180, 10);
			team = other.team;
			creator = other
			ammo = 5;
			image_angle = other.direction + 180 + (random_range(-60, 60));
			
			alarm0 = 1;
			with instance_create(x,y,LightningSpawn) image_angle = other.image_angle;
		}
	}
	
	if image_index > 3 instance_destroy();
	
	with(projectile) if instance_exists(self) && instance_exists(other) && (team != other.team) && (distance_to_object(other) < 20) {
		instance_destroy();
	}
	
	if (instance_exists(self)) && (hurttime >= 0) hurttime -= 1;
	if (instance_exists(self)) && (hurttime = 0) && (canthurt != noone) canthurt = noone;
	
}
if (!instance_exists(Me)) {
	instance_destroy();
}

#define TCCSbullet(Me)
with(Me) {
	image_angle = direction;

	if speed > 0 speed -= speed/10;
	
	if (speed > 1) && ((image_index > 1) && (image_index < 2)) image_speed = 0;
	else image_speed = 0.5;
	
	time += 1;
	if time = 8 {
		time = 0;
		sound_play_pitchvol(sndLightningPistol, random_range(2, 4), 0.4);
		with instance_create(x+lengthdir_x(speed*3,direction),y+lengthdir_y(speed*3,direction),Lightning){
			move_contact_solid(other.direction + 180, 10);
			team = other.team;
			creator = other
			ammo = 4;
			image_angle = other.direction + 180 + (random_range(-30, 30));
			
			alarm0 = 1;
			with instance_create(x,y,LightningSpawn) image_angle = other.image_angle;
		}
	}
	
	if image_index > 3 instance_destroy();
	
	with(projectile) if instance_exists(self) && instance_exists(other) && (team != other.team) && (distance_to_object(other) < 15) {
		instance_destroy();
		other.speed /= (1.1 - 0.05*skill_get(13));
	}
	
	if (instance_exists(self)) && (hurttime >= 0) hurttime -= 1;
	if (instance_exists(self)) && (hurttime = 0) && (canthurt != noone) canthurt = noone;
}

#define TCCPop
var a = random(360);
repeat(16){
	a += 22.5;
	with instance_create(x+lengthdir_x(2, a),y+lengthdir_y(2, a),CustomProjectile){
		motion_add(a + random_range(-5,5),10 + 2.5*skill_get(13));
		image_angle = direction;

		team = other.team;
		creator = other;

		sprite_index = global.sprTCCBullet;
		mask_index = mskBullet1;
		
		damage = 4;
		force = 4;
		
		on_hit = script_ref_create(TCCHurt);
		on_wall = script_ref_create(TCCWall);
		
		canthurt = noone;
		hurttime = -1;
		
		time = 4;
		
		script_bind_step(TCCSbullet, 0, id);
	}
}
sound_play_gun(sndOasisShoot, 0.25, 0.3);

#define TCCBulletGlow
with(CustomProjectile) if (sprite_index = global.sprTCCBullet) || (sprite_index = global.sprTCCBigBullet) {
	draw_set_blend_mode(bm_add);
	draw_sprite_ext(sprite_index, image_index, x, y, 1.5, 1.5, direction, c_white, 0.1);
	draw_set_blend_mode(bm_normal);
}

#define TCCHurt
if canthurt != other {
	projectile_hit(other, damage, force, direction);
	canthurt = other;
	hurttime = 10;
}

#define TCCWall
speed = 0;