#define init
global.sprThunderCloudShotgun_0 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAGFBMVEUAAAAAAAAiERA0IR5HLy1OYHRnRD+QpLT+OupDAAAAAXRSTlMAQObYZgAAAFNJREFUeAG1jtEKgDAMA03azf//Y9OGPRTx0UMOPAbp9Q2gr5g1sG6xYCoJcpssdQ3BTfGqyVJGilP1irZAT1F0taOq504d58H/8ji4JuyRAetfHp8FAdna8U2tAAAAAElFTkSuQmCC", 3, 3);
global.sprThunderCloudShotgun_1 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAGFBMVEUAAAAAAAAiERA0IR5HLy1OYHRnRD+QpLT+OupDAAAAAXRSTlMAQObYZgAAAFNJREFUeAG1zEEKwzAMBVGPJLv3v3GHChVCyDIP8xeD0XoGPnGtyf5o00wo4rQ6+tVUnO3XW61QVZameiB6ZbSGprppFZqK1rAi959EFbNDQM+7vq0OAefWWRINAAAAAElFTkSuQmCC", 3, 3);
global.sprThunderCloudShotgun_2 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAFdJREFUeNq1jkEOgDAIBIUC9f8vdurKoTEenZBNmBDg+MaMWuw2rE4oE0uB+xS54rYBPovRl81RNTIjoS0LHJRI7NNHKAP7nGu7vWfqye1hTnSK3qL4lwv4VAI8ac6VcQAAAABJRU5ErkJggg==", 3, 3);
global.sprThunderCloudShotgun_3 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAFlJREFUeNq1jkkKwEAIBNPOqPn/i1OzHSTkmEIaLES9vpGoQbVdcUNoMRSY5cJHTNvBMhh9WQ9w7w7HsqBFtEwDJNYgcycjWBDMHlve0+rJ8jAndhYt7fiVBwMRAkjRIIkzAAAAAElFTkSuQmCC", 3, 3);
global.sprThunderCloudShotgun_4 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAFtJREFUeNq1z9EKgCAQRNFmdXf6/y/umhhI9NhBFrpK6PFNYg177aoTpWdTiPCUxl07wsXRV81RM3tiVX5QsANEasBuVY3KESoEe+5t19P8Zm4XztSa2+s0x78uEFUCWM/uuIYAAAAASUVORK5CYII=", 3, 3);
global.sprThunderCloudShotgun_5 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAHlBMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLT///92cBK8AAAAAXRSTlMAQObYZgAAAFlJREFUeNq1zjEOgDAMBEHOxD7+/2I2igsiRMkocrG6Isc3iTftdagulJaZEOElDSpDhIvpq+asmSPRlWlvA0RqgAoqEyoE+6w67e17VIG7fThTfZ8Y9vnVDR53AmyhfFlzAAAAAElFTkSuQmCC", 3, 3);
global.sprThunderCloudShotgun_6 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAHlBMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLT///92cBK8AAAAAXRSTlMAQObYZgAAAFpJREFUeNq1zksKwDAIANFq/PT+J+5YCUVKl32ELAZJPL6JcMqsJnEipFWCajZP3NWgGYy+qld1N8euPBDIVBCpCiqzVEaoEOzZsR51RSzqWJgv0B89SH396wIqzAKCx55yDwAAAABJRU5ErkJggg==", 3, 3);
global.sprThunderCloudShotgun_7 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAFdJREFUeNq1zkEOwCAIRFEGBXr/E/erdWGaLvuWP5OAfZNM01m78kJqGQnutURBcwivZPqqMWpED+zq9WwdMshBBZUJFcLeHu9pb3U8HNEy2zh05If96wY4gwKc1n18ygAAAABJRU5ErkJggg==", 3, 3);
global.sprThunderCloudShotgun_8 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAFpJREFUeNqtzkEOgDAIRNEOLeD9T+xH7YIYd7509TNJGd8kXul1KQ6EbpVgljdP6BrCMpi+qld1X45dLZ+tgUg1UEFlQoWwt+087a3awe6B+qhlzYgpYieM/5xCAwK0Ar0yngAAAABJRU5ErkJggg==", 3, 3);
global.sprThunderCloudShotgun_9 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAG1BMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLRcPifCAAAAAXRSTlMAQObYZgAAAF1JREFUeAGdzkEKgDAMRNFO2iTe/8T+gEWiuPHR1WegGd8kXul1KQ6EgEowS8ATVIawDKav6lXdl2NXy2trIFINVFCZUCHsbTtPe0u6yT1QH7WsgIiNZsQkPgjjjxNKDgLO7kiMUAAAAABJRU5ErkJggg==", 3, 3);
global.sprThunderCloudShotgun_X = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAAHlBMVEUAAAAAAAAiERAtOk40IR5HLy1OYHRnRD+QpLSYrr/ulOKcAAAAAXRSTlMAQObYZgAAAF9JREFUeAF9zlEKgDAMBNFu2iTe/8RO0CJB9NGvYaEZ3yRe6XUpDoSASjBLwBNUhrAMpq/qVd2XY1fLe2sgUg1UUJlQIextO097+yTIPVAftayAWsRVW4JmxOy1COPfCU/dAugPcCO4AAAAAElFTkSuQmCC", 3, 3);

global.sprTCSBullet = sprite_add_base64("iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAMAAACROYkbAAAADFBMVEUAAAArOU9PY3mYrr+zfeouAAAAAXRSTlMAQObYZgAAAGNJREFUeAHlkzEWgDAIQ/nx/ne2VeGlI4/RvyWGDBZigx6IFxY6LAKC1ObV+LX4vsOSibC8ShdbWl4i6xJ5WqUdz0utgnQNAc0CnQWKdkFlc4D/FUx/4vgZx4s0X+XhMY3P+QYLsQVRZWlBggAAAABJRU5ErkJggg==",4,8,8);

global.TCSBulletGlower = noone;

#define weapon_name
return "THUNDER CLOUD SHOTGUN";

#define weapon_sprt
with(self) if (instance_exists(Player)) && ("wep" in self) && ((wep = "thunder cloud shotgun") || (bwep = "thunder cloud shotgun")) && ("TCSAmmo" in self) && (TCSAmmo < 9.5){
	if TCSAmmo > 8.5 return global.sprThunderCloudShotgun_9;
	else if TCSAmmo > 7.5 return global.sprThunderCloudShotgun_8;
	else if TCSAmmo > 6.5 return global.sprThunderCloudShotgun_7;
	else if TCSAmmo > 5.5 return global.sprThunderCloudShotgun_6;
	else if TCSAmmo > 4.5 return global.sprThunderCloudShotgun_5;
	else if TCSAmmo > 3.5 return global.sprThunderCloudShotgun_4;
	else if TCSAmmo > 2.5 return global.sprThunderCloudShotgun_3;
	else if TCSAmmo > 1.5 return global.sprThunderCloudShotgun_2;
	else if TCSAmmo > 0.5 return global.sprThunderCloudShotgun_1;
	else return global.sprThunderCloudShotgun_0;
}
else return global.sprThunderCloudShotgun_X;

#define weapon_type
return 0;

#define weapon_melee
return false;

#define weapon_auto
return true;

#define weapon_load
return 20;

#define weapon_cost
return 0;

#define weapon_swap
return sndSwapMachinegun;

#define weapon_area
return 31;

#define weapon_text
return "SHOCKING RESULTS";

#define weapon_fire
if TCSAmmo > 0 {
	if !instance_exists(global.TCSBulletGlower) {
		global.TCSBulletGlower = instance_create(0, 0, CustomObject);
		with(global.TCSBulletGlower){
			script_bind_draw(TCSBulletGlow, 0.1);
		}
	}
	var cloudangle = 20*other.accuracy
	repeat(2) if(instance_exists(self)){
		repeat(2){
			with instance_create(x+lengthdir_x(2, gunangle),y+lengthdir_y(2, gunangle),CustomProjectile){
				motion_add(other.gunangle + random_range(-5,5)*other.accuracy + cloudangle,10 + 5*skill_get(13));
				image_angle = direction;

				team = other.team;
				creator = other;

				sprite_index = global.sprTCSBullet;
				mask_index = mskBullet1;
		
				damage = 6;
				force = 8;
		
				on_hit = script_ref_create(TCSHurt);
				on_wall = script_ref_create(TCSWall);
				
				canthurt = noone;
				hurttime = -1;
				
				time = 4;
				
				script_bind_step(TCSbullet, 0, id);
			}
			cloudangle *= -1;
		}
		cloudangle /= 2;		
	}
	sound_play_gun(sndOasisShoot, 0.25, 0.5);
	motion_add(other.gunangle,-4)
	wkick = 22;

	TCSAmmo -= 1;
	
}
else with instance_create(x,y,PopupText){
	mytext = "EMPTY";
	time = 15;
}
wkick = 20;

#define step
with(Player) if (wep = "thunder cloud shotgun") || (bwep = "thunder cloud shotgun") {
	if "TCSAmmo" not in self TCSAmmo = 10 + 10*skill_get(10);
	
	if (((wep = "thunder cloud shotgun") && wkick <= 0) || (wep != "thunder cloud shotgun")) && (TCSAmmo < 10 + 10*skill_get(10)) {
		TCSAmmo += 0.04;
	}
}

#define TCSbullet(Me)
with(Me) {
	image_angle = direction;

	if speed > 0 speed -= speed/10;
	
	if (speed > 1) && ((image_index > 1) && (image_index < 2)) image_speed = 0;
	else image_speed = 0.5;
	
	time += 1;
	if time = 8 {
		time = 0;
		sound_play_pitchvol(sndLightningPistol, random_range(2, 4), 0.4);
		with instance_create(x+lengthdir_x(speed*3,direction),y+lengthdir_y(speed*3,direction),Lightning){
			move_contact_solid(other.direction + 180, 10);
			team = other.team;
			creator = other
			ammo = 3;
			image_angle = other.direction + 180 + (random_range(-40, 40));
			
			alarm0 = 1;
			with instance_create(x,y,LightningSpawn) image_angle = other.image_angle;
		}
	}
	
	if image_index > 3 instance_destroy();
	
	with(projectile) if instance_exists(self) && instance_exists(other) && (team != other.team) && (distance_to_object(other) < 15) {
		instance_destroy();
		other.speed /= (1.5 - 0.25*skill_get(13));
	}
	
	if (instance_exists(self)) && (hurttime >= 0) hurttime -= 1;
	if (instance_exists(self)) && (hurttime = 0) && (canthurt != noone) canthurt = noone;
}
if (!instance_exists(Me)) {
	instance_destroy();
}

#define TCSBulletGlow
with(CustomProjectile) if sprite_index = global.sprTCSBullet {
	draw_set_blend_mode(bm_add);
	draw_sprite_ext(sprite_index, image_index, x, y, 1.5, 1.5, direction, c_white, 0.1);
	draw_set_blend_mode(bm_normal);
}

#define TCSHurt
if canthurt != other {
	projectile_hit(other, damage, force, direction);
	canthurt = other;
	hurttime = 10;
}

#define TCSWall
speed = 0;