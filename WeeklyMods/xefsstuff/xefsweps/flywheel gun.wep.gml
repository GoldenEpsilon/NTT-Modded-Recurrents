#define init
global.sprFLW0 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzrff4ddAAAAAXRSTlMAQObYZgAAAHNJREFUeNptj0EOAyEMA+sYwkLy//fWu4W0h84hIJuRwqvAg45vcpgCiKge/bqMFgyx4I41MU+jZ2qckYMcGR4/jluIbO4tg6fpcsxcZCNbOv3T9H1047idQfCJag+pC6RG7b4VBQMRGgoKbFW/0uUvlb8BHWQDTTERMrUAAAAASUVORK5CYII=", 4, 4);
global.sprFLW1 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzrff4ddAAAAAXRSTlMAQObYZgAAAHBJREFUeAFtj1EOwyAMQ+sYkpbk/uedx6CqtL4PkOI8yTluMDkeYHMJrHyuoJ+n0ZIpBkiMC9dOAChxZoV7VHo+HLcU1chWyZ10OWYuqrm3cvov6evrxvg6QXCO7h5SBzL1HLv+UjQIqHn8XfV67gsfBrsDK03gHOEAAAAASUVORK5CYII=", 4, 4);
global.sprFLW2 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzrff4ddAAAAAXRSTlMAQObYZgAAAG9JREFUeAF9z2EKRCEIBOA3jukrvf95V9qKYGG/P4GTMD4HpueCrResfH5Be1+hBKMMmGF09J0AqMQY6aRnWFw7JlFSzTSDO2kARKykkppG+yZtPU3oGqFOcI5Oj1odqH5jdStrpQYOEv5z1X3uPx8KywMrQJWlmQAAAABJRU5ErkJggg==", 4, 4);
global.sprFLW3 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzrff4ddAAAAAXRSTlMAQObYZgAAAG5JREFUeAF9j4EKxDAIQxdjdU7//3vP29pROLhHoeAjkBwvuDk2sIgG0/drM85TKMlsLpC4ArEMgDbGLDfzSsstY5JNKamVXGYAELGmNFPLaI8Z8xtC1wh1gvfp7dHRp8Hs1sxIH/xr/GfVPvcfHwksAyWICtQsAAAAAElFTkSuQmCC", 4, 4);
global.sprFLW4 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzrff4ddAAAAAXRSTlMAQObYZgAAAHBJREFUeAFtj1EOwzAIQwsmUAL3P++8Lqkqre8HiYclfNzIxfFANklk+etExnkqtFBkirvMlNyGZzSO6gCiy+uRcS3SVmVd2GYwo+qkLdPa4T8z1hiKMHcLCK7V/QejUwCZ6zeyIlzE18Rfq9e6L3wAD0MDKy2nRjQAAAAASUVORK5CYII=", 4, 4);
global.sprFLW5 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzrff4ddAAAAAXRSTlMAQObYZgAAAG5JREFUeAFtj9EKxTAIQ6exOqf//703dO0Y3J0XwWMgHg8yOV7IJoksP09knKdCC0UucZcrJbfhGY2jOqqiy+uVcS3Slmld2GYwo+qkzd3a4bcZawxFGGABwVw9PRi9G6xuZEW4CAEk/r76fPeDHxS+AzHq7RIxAAAAAElFTkSuQmCC", 4, 4);
global.sprFLW6 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAJ1BMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzrff4ddAAAAAXRSTlMAQObYZgAAAHBJREFUeAF9j1EOxCAIBQtPoQj3P+++utptsknnx8RhEjhuZHI8kE0QWX6OSD9PhSaSDMmUERLbcIzGkOURXmn5aEyTVDNrldims1E1Ug1oZbCv6evpCr8ah2B+3XswHQLIWLuRlfDDL+N/V/3OfecDE7sDK7dhNCcAAAAASUVORK5CYII=", 4, 4);
global.sprFLW7 = sprite_add_weapon("iVBORw0KGgoAAAANSUhEUgAAABkAAAALCAMAAAC9KdbBAAAAKlBMVEUAAAAAAAAcIiYuNz4zHA8/GRNMVl1UOhhfLyZseoSBaSKKlp7Lpzr///8v4yAdAAAAAXRSTlMAQObYZgAAAHJJREFUeNptjkEOxCAMA5sYTCH5/3vrsoXtoXNIkAdLOTY20foniy7MIra3ep4OD4QYJju69WX0TYaIbGTLYLw69BBZgJKBZao67hRZyJIEf6Y+qzra3WkwzGjfoeowUmPf/lQUNAM0jhcm5updj092fgEh7gNJIJ43sQAAAABJRU5ErkJggg==", 4, 4);

#define weapon_name
return "FLYWHEEL GUN";

#define weapon_sprt

with(self) if (instance_exists(Player)) && ("wep" in self) && ("bwep" in self) && ((wep = "flywheel gun") || (bwep = "flywheel gun")) && ("FLWframe" in self){
	if (FLWframe = 0) return global.sprFLW0;
	else if (FLWframe = 1) return global.sprFLW1;
	else if (FLWframe = 2) return global.sprFLW2;
	else if (FLWframe = 3) return global.sprFLW3;
	else if (FLWframe = 4) return global.sprFLW4;
	else if (FLWframe = 5) return global.sprFLW5;
	else if (FLWframe = 6) return global.sprFLW6;
	else if (FLWframe = 7) return global.sprFLW7;
}
else return global.sprFLW4;

#define weapon_type
return 1;

#define weapon_auto
return false;

#define weapon_load
return 0.5;

#define weapon_cost
return 0;

#define weapon_swap
return sndSwapMachinegun;

#define weapon_area
return 8;

#define weapon_text
return "RHYTHM HELL";

#define weapon_fire

FLWrate += ((5 - FLWrate) / (15 - (5 * ((maxhealth-my_health)/maxhealth)) * skill_get(22)));

#define step

if (argument0) {
	if "FLWframe" not in self {
		FLWframe = 0;
		FLWstep = 0;
		FLWrate = 0;
		FLWcost = 0;
	}
	else {
		FLWstep += FLWrate;
		while (FLWstep > 7) {
			FLWstep -= 7;
			
			if ammo[1] > 0 {
			
				FLWcost += 1;
				if ((FLWrate < 1) && (FLWcost > 0)) {
					ammo[1] -= 1;
					FLWcost = 0;
				}
				else if ((FLWrate < 2) && (FLWcost > 1)) {
					ammo[1] -= 1;
					FLWcost = 0;
				}
				else if ((FLWrate < 2.5) && (FLWcost > 4)) {
					ammo[1] -= 1;
					FLWcost = 0;
				}
				else if ((FLWrate < 2.75) && (FLWcost > 8)) {
					ammo[1] -= 1;
					FLWcost = 0;
				}
				else if (FLWcost > 16){
					ammo[1] -= 1;
					FLWcost = 0;
				}
			
				with instance_create(x+lengthdir_x(10, gunangle),y+lengthdir_y(10, gunangle),Bullet2){
					speed = 10 + 5 * other.FLWrate;
					direction = other.gunangle + (random(10 * other.FLWrate)- 5 * other.FLWrate) * other.accuracy;
					image_angle = direction;
					team = 2;
					creator = other;
				}
				
				sound_play_gun(sndTurretFire, 0.25, -0.5);
				if wkick < 10 wkick += 2.5;
			}
			sound_play_pitchvol(sndEmpty, 0.75 + FLWrate, 0.75 + 0.25 * FLWrate);
		}
		
		if (FLWrate > 0) FLWrate -= (0.01 + (0.01 * FLWrate));
		if (FLWrate < 0) FLWrate = 0;
		
		FLWframe = round(FLWstep)
	}
}
if ("bwep" in self) && (bwep = "flywheel gun") && (wep != "flywheel gun") {
	FLWstep += FLWrate;
	
	while (FLWstep > 7) {
		FLWstep -= 7;
		sound_play_pitchvol(sndEmpty, 0.75 + FLWrate, 0.3 + 0.1 * FLWrate);
	}

	if (FLWrate > 0) FLWrate -= (0.01 + (0.01 * FLWrate));
	if (FLWrate < 0) FLWrate = 0;
		
	FLWframe = round(FLWstep)
}