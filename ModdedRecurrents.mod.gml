#define README
/*By @yGolden Epsilon@w##V 1.9##Adds Modded Weeklies! (and Dailies!)##@bNOTE:@w You cannot open chat while using this mod to prevent cheating##The mod list is updated at the github.##Github:#https://github.com/GoldenEpsilon/NTT-Modded-Recurrents*/
#define LOGO
/*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*/
#define init
trace("NOTE: once you start a weekly chatting disqualifies you from uploading to github (since I can't check to differentiate messages from commands), but your score is still saved locally.");
global.changelog = "        Modded Recurrents By Golden Epsilon. NOTE: You cannot open chat while using this mod to prevent cheating. The mod list is updated at the github: https://github.com/GoldenEpsilon/NTT-Modded-Recurrents, and there is a discord at https://discord.gg/7gsvz7u CHANGELOG: Version 1.9: fixed some of the most glaring bugs for increased resolution. Version 1.8: Added going to previous recurrents to see scores and play them. Added different types of scoreboards to sort by (all scores, highest score from each person, first run by each person). Added events! I add events whenever I want to and build it to my liking. Version 1.7: Added ticker and changelog. Added GuiPack to help with the gui (A new set of functions that I'm developing to make guis easier to create)."
global.sprFont = sprite_add_base64("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",570/6,0,0);
global.sprWeekly = sprite_add_base64("iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAABNklEQVRIDWO0doj8z0ABOLJ/GQW6GRhYQLofvbpPliFyYopgfXLalmTpf3T1OAMTWTqpqGnUAYMrBECJAoRxAVrIg3MByMLHYUfg9iKz4YJIDJC87CobJBHy9Q94FMBDAOQdG8coiK8cFqP4DsahhTyKA47isBjmAFrIwx3wv54ZZg9RtNwqVGXk6seaBhgZGRnuPvjAAKcb/0L4jX9RbcXBg+uDmYNHPzwEkM36/x9SP8HpepCsAMN/MI2sEjsbrg9mDh79KCHACHMpzOUwGiZOIATI0Y8SApB4FGAgxQfIYUCO/qEZApPmXkD2OJxNbAgg6ycuBBgZ4ZYga4YLQhk40wAe/cSlAWhqxmc5yA04QwCPfrgDyG1WwUKBXP0oUQAzjJ70gDsAHAWw1i25PsfXiCFkJgCiFgWoHcePfAAAAABJRU5ErkJggg==",2,0,0);
global.sprEvent = sprite_add_base64("iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAIAAAAUMWhjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAC/SURBVEhL7Y+xDQIxDEW9CAswwUk0rMFY9LcTDSUSIzBC+D7fnRzLJHaTArC+IufnWy+m0/mSUkkWAw7HKSgBGLOhP6CrsQBc3GHta4D2tbSPZgUUussDN0abj9gO0L7V5g8HoOF5k1a+AUTyFaArA+iqBgSqAgTKBxDR4/mSE7+QU55cQDvPgYEbLPzEBoE8p35mg+t8s4BmSR5NawOc7C9pBxDIc6q7gaQdwIfSeVxXQFA7IKivAaSEmUSV8gZDGKxrqTAwHQAAAABJRU5ErkJggg==",2,0,0);
global.font = font_add_sprite(global.sprFont, 32, 0, 0);
#macro fnt1 global.font
global.menu = 0;
global.leaderboard=[];
global.leaderboard1=[];
global.leaderboard2=[];
global.leaderboard3=[];
global.leaderboardLoaded = 0;
global.leaderboardExists = 0;
global.leaderboardPos = 0;
global.leaderboardOpening = 0;
global.descriptionOpening = 0;
global.weekly = "";
global.weeklyFlavor = "";
global.weeklyHeight = 0;
global.weeklyWidth = 0;
global.daily = "";
global.dailyFlavor = "";
global.dailyHeight = 0;
global.dailyWidth = 0;
global.event = "";
global.eventFlavor = "";
global.eventHeight = 0;
global.eventWidth = 0;
global.details = "";
global.detailsFlavor = "";
global.detailsHeight = 0;
global.detailsWidth = 0;
global.weeklyCurrentX = 60;
global.weeklyCurrentY = -1000;
global.weeklyCurrentMax = 36;
global.weeklyCurrentBH = 16;
global.scoreboardX = 159;
global.scoreboardY = 36;
global.scoreboardW = 160;
global.scoreboardH = 0;
global.scoreboardMin = 0;
global.scoreboardMax = 152;
global.scoreboardSpeed = 2;
global.scoreboardType = 0;
global.prevDailies = [];
global.prevWeeklies = [];
global.prevEvents = [];
global.recurrentNum = 0;
global.headers = ds_map_create();
ds_map_set(global.headers, "Authorization", "token 7349069d71cc5b8e1165"+"40e940c2ad5650ea32de");
ds_map_set(global.headers, "Cache-Control", "no-cache");	
ds_map_set(global.headers, "Accept", "application/vnd.github.full+json");
ds_map_set(global.headers, "User-Agent", "Nuclear Throne Together");
while(!mod_sideload() || !instance_exists(Menu)){wait 1;}
file_delete("dl.txt");
while (file_exists("dl.txt")) {wait 1;}
http_request('https://api.github.com/repos/GoldenEpsilon/NTT-Modded-Recurrents/contents/leaderboards/Weekly.txt'
, "GET", global.headers,
''
, "dl.txt");
while (!file_loaded("dl.txt")) {wait 1;}
var dl = "";
if(array_length(string_split(string_load("dl.txt"), chr(34)+"message"+chr(34)+":"+chr(34)+"Not Found"+chr(34))) == 1){dl = string_split(string_split(string_load("dl.txt"), chr(34)+","+chr(34)+"encoding"+chr(34)+":"+chr(34)+"base64"+chr(34))[0],chr(34)+"content"+chr(34)+":"+chr(34))[1];}
file_unload("dl.txt");
dl = string_replace_all(dl, "\" + "n", "");
var leaderboard = string_split(string_replace_all(base64Decode(dl), '/N', 'CORRUPTED NAME'), "|");
updateLeaderboard(leaderboard);

global.leaderboardLoaded = 1;
file_unload("dl.txt");

file_delete("Weekly.txt");
while (file_exists("Weekly.txt")) {wait 1;}
file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/Weekly.mod.gml", "Weekly.txt");
while (!file_loaded("Weekly.txt")) {wait 1;}
global.weekly = string_replace_all(string_replace_all(string_split(string_split(string_load("Weekly.txt"), "*/")[0], "/*")[1],chr(10),""),chr(13),"");
global.weeklyFlavor = string_replace_all(string_replace_all(string_split(string_split(string_load("Weekly.txt"), "*/")[1], "/*")[1],chr(10),""),chr(13),"");
global.weeklyHeight = string_count("#", global.weekly);
global.weeklyWidth = 0;
var temp = string_split(global.weekly, "#");
for(var i = 0; i < array_length(temp); i++){
	if(string_length(temp[i]) > global.weeklyWidth){global.weeklyWidth = string_length(temp[i]);}
}

file_delete("Daily.txt");
while (file_exists("Daily.txt")) {wait 1;}
file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/Daily.mod.gml", "Daily.txt");
while (!file_loaded("Daily.txt")) {wait 1;}
global.daily = string_replace_all(string_replace_all(string_split(string_split(string_load("Daily.txt"), "*/")[0], "/*")[1],chr(10),""),chr(13),"");
global.dailyFlavor = string_replace_all(string_replace_all(string_split(string_split(string_load("Daily.txt"), "*/")[1], "/*")[1],chr(10),""),chr(13),"");
global.dailyHeight = string_count("#", global.daily);
global.dailyWidth = 0;
var temp = string_split(global.daily, "#");
for(var i = 0; i < array_length(temp); i++){
	if(string_length(temp[i]) > global.dailyWidth){global.dailyWidth = string_length(temp[i]);}
}
file_unload("Daily.txt");

file_delete("Event.txt");
while (file_exists("Event.txt")) {wait 1;}
file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/Event.mod.gml", "Event.txt");
while (!file_loaded("Event.txt")) {wait 1;}
global.event = string_replace_all(string_replace_all(string_split(string_split(string_load("Event.txt"), "*/")[0], "/*")[1],chr(10),""),chr(13),"");
global.eventFlavor = string_replace_all(string_replace_all(string_split(string_split(string_load("Event.txt"), "*/")[1], "/*")[1],chr(10),""),chr(13),"");
global.eventHeight = string_count("#", global.event);
global.eventWidth = 0;
var temp = string_split(global.event, "#");
for(var i = 0; i < array_length(temp); i++){
	if(string_length(temp[i]) > global.eventWidth){global.eventWidth = string_length(temp[i]);}
}
file_unload("Event.txt");

global.details = global.weekly;
global.detailsHeight = global.weeklyHeight;
global.detailsWidth = global.weeklyWidth;
global.detailsFlavor = global.weeklyFlavor;
global.weeklyCurrentY = -(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax);
global.menu = 0;
global.recurrentNum = 0;


file_delete("PrevRecurrents.txt");
while (file_exists("PrevRecurrents.txt")) {wait 1;}
http_request('https://api.github.com/repos/GoldenEpsilon/NTT-Modded-Recurrents/contents/PreviousWeeklies'
, "GET", global.headers,
''
, "PrevRecurrents.txt");
while (!file_loaded("PrevRecurrents.txt")) {wait 1;}
var temp = string_split(string_load("PrevRecurrents.txt"), '"name":"');
var prevRec = [];
for(var i = 1; i < array_length(temp); i++;){
	array_push(prevRec, string_split(temp[i], '"')[0]);
}
array_sort(prevRec, 0);
for(var i = 0; i < array_length(prevRec); i++;){
	if(array_length(string_split(prevRec[i], "Daily")) > 1){
		array_push(global.prevDailies, prevRec[i]);
	}
	if(array_length(string_split(prevRec[i], "Weekly")) > 1){
		array_push((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies))), prevRec[i]);
	}
	if(array_length(string_split(prevRec[i], "Event")) > 1){
		array_push(global.prevEvents, prevRec[i]);
	}
}
#macro weeklyButtonX 6
#macro weeklyButtonY 41
#macro weeklyButtonW 18
#macro weeklyButtonH 24
#macro weeklyButtonLW 12
#macro weeklyButtonLH 8
#macro weeklyCurrentW 2
#macro weeklyCurrentH 8
#macro weeklyCurrentLH 6.6
#macro weeklyCurrentLW 4.4
#macro swapX 35
#macro swapY 36
#macro swapW 17
#macro swapH 10
#define step
if(mod_sideload() && instance_exists(Menu)){
	if(array_length(instances_matching(instances_matching(CustomObject, "GuiPack", "gp_ticker"), "name", "changelog")) == 0){
		with(instance_create(-4,232,CustomObject)){
			y = game_height - 8
			w = game_width - x + 4;
			GuiPack = "gp_ticker";
			name = "changelog";
			text = global.changelog;
			ticker_speed = 4;
			font = fntSmall;
			fontWidth = 4;
		}
	}
	with(instances_matching(instances_matching(CustomObject, "GuiPack", "gp_ticker"), "name", "changelog")){
		if("w" in self and "h" in self){
			if(gp_button_check(x,y,w,h,1)){
				offset = current_frame;
			}
		}
	}
	with(instances_matching(CharSelect, "visible", true)){visible=false;xstart = -100;}
	if(gp_button_check(weeklyButtonX-5, 32, weeklyButtonW+3, weeklyButtonH+10) && global.menu == 0){
		if(global.recurrentNum == 0){
			global.menu = -1;
			file_delete("Weekly.mod.gml");
			while (file_exists("Weekly.mod.gml")) {wait 1;}
			file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/Weekly.mod.gml", "Weekly.mod.gml");
			while (!file_loaded("Weekly.mod.gml")) {wait 1;}
			string_save("/loadtext load2", "load.txt");
			string_save("/allowmod Weekly", "load2.txt");
			while (!file_loaded("load.txt")) {wait 1;}
			mod_load("data/"+mod_current+".mod/Weekly.mod.gml");
			mod_loadtext("data/"+mod_current+".mod/load.txt");
		}else{
			global.menu = -1;
			file_delete("Weekly.mod.gml");
			while (file_exists("Weekly.mod.gml")) {wait 1;}
			file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/PreviousWeeklies/" + global.prevWeeklies[global.recurrentNum], "Weekly.mod.gml");
			while (!file_loaded("Weekly.mod.gml")) {wait 1;}
			string_save("/loadtext load2", "load.txt");
			string_save("/allowmod Weekly", "load2.txt");
			while (!file_loaded("load.txt")) {wait 1;}
			mod_load("data/"+mod_current+".mod/Weekly.mod.gml");
			mod_loadtext("data/"+mod_current+".mod/load.txt");
		}
	}
	if(gp_button_check(weeklyButtonX-5, 32, weeklyButtonW+3, weeklyButtonH+10) && global.menu == 1){
		if(global.recurrentNum == 0){
			global.menu = -1;
			file_delete("Daily.mod.gml");
			while (file_exists("Daily.mod.gml")) {wait 1;}
			file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/Daily.mod.gml", "Daily.mod.gml");
			while (!file_loaded("Daily.mod.gml")) {wait 1;}
			string_save("/loadtext load2", "load.txt");
			string_save("/allowmod Daily", "load2.txt");
			while (!file_loaded("load.txt")) {wait 1;}
			mod_load("data/"+mod_current+".mod/Daily.mod.gml");
			mod_loadtext("data/"+mod_current+".mod/load.txt");
		}else{
			global.menu = -1;
			file_delete("Daily.mod.gml");
			while (file_exists("Daily.mod.gml")) {wait 1;}
			file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/PreviousWeeklies/" + global.prevDailies[global.recurrentNum], "Daily.mod.gml");
			while (!file_loaded("Daily.mod.gml")) {wait 1;}
			string_save("/loadtext load2", "load.txt");
			string_save("/allowmod Daily", "load2.txt");
			while (!file_loaded("load.txt")) {wait 1;}
			mod_load("data/"+mod_current+".mod/Daily.mod.gml");
			mod_loadtext("data/"+mod_current+".mod/load.txt");
		}
	}
	if(gp_button_check(weeklyButtonX-5, 32, weeklyButtonW+3, weeklyButtonH+10) && global.menu == 2){
		if(global.recurrentNum == 0){
			global.menu = -1;
			file_delete("Event.mod.gml");
			while (file_exists("Event.mod.gml")) {wait 1;}
			file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/Event.mod.gml", "Event.mod.gml");
			while (!file_loaded("Event.mod.gml")) {wait 1;}
			string_save("/loadtext load2", "load.txt");
			string_save("/allowmod Event", "load2.txt");
			while (!file_loaded("load.txt")) {wait 1;}
			mod_load("data/"+mod_current+".mod/Event.mod.gml");
			mod_loadtext("data/"+mod_current+".mod/load.txt");
		}else{
			global.menu = -1;
			file_delete("Event.mod.gml");
			while (file_exists("Event.mod.gml")) {wait 1;}
			file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/PreviousWeeklies/" + global.prevEvents[global.recurrentNum], "Event.mod.gml");
			while (!file_loaded("Event.mod.gml")) {wait 1;}
			string_save("/loadtext load2", "load.txt");
			string_save("/allowmod Event", "load2.txt");
			while (!file_loaded("load.txt")) {wait 1;}
			mod_load("data/"+mod_current+".mod/Event.mod.gml");
			mod_loadtext("data/"+mod_current+".mod/load.txt");
		}
	}
	if(gp_button_check(swapX - 5, 32, swapW + 5, swapH + 6)){
		global.recurrentNum = 0;
		global.leaderboardLoaded = 0;
		global.menu++;
		global.menu%=3;
		global.details = global.menu == 0 ? global.weekly : (global.menu == 1 ? global.daily : global.event);
		global.detailsHeight = global.menu == 0 ? global.weeklyHeight : (global.menu == 1 ? global.dailyHeight : global.eventHeight);
		global.detailsWidth = global.menu == 0 ? global.weeklyWidth : (global.menu == 1 ? global.dailyWidth : global.eventWidth);
		global.detailsFlavor = global.menu == 0 ? global.weeklyFlavor : (global.menu == 1 ? global.dailyFlavor : global.eventFlavor);
		if(!global.descriptionOpening){global.weeklyCurrentY = -(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax);}
		file_delete("dl.txt");
		while (file_exists("dl.txt")) {wait 1;}
		http_request('https://api.github.com/repos/GoldenEpsilon/NTT-Modded-Recurrents/contents/leaderboards/'+(global.menu == 0?'Weekly.txt':(global.menu == 1 ? 'Daily.txt' : 'Event.txt'))
		, "GET", global.headers,
		''
		, "dl.txt");
		while (!file_loaded("dl.txt")) {wait 1;}
		var dl = "";
		if(array_length(string_split(string_load("dl.txt"), chr(34)+"message"+chr(34)+":"+chr(34)+"Not Found"+chr(34))) == 1){dl = string_split(string_split(string_load("dl.txt"), chr(34)+","+chr(34)+"encoding"+chr(34)+":"+chr(34)+"base64"+chr(34))[0],chr(34)+"content"+chr(34)+":"+chr(34))[1];}
		file_unload("dl.txt");
		dl = string_replace_all(dl, "\" + "n", "");
		leaderboard = string_split(string_replace_all(base64Decode(dl), '/N', 'CORRUPTED NAME'), "|");
		updateLeaderboard(leaderboard);
		global.leaderboardLoaded = 1;
		global.scoreboardType = 0;
		file_unload("dl.txt");
		global.leaderboardPos = max(global.leaderboardPos, 0);
		global.leaderboardPos = min(global.leaderboardPos, max(array_length(global.leaderboard)-floor((global.scoreboardH)/15), 0));
		global.recurrentNum = 0;
	}
	if(gp_button_check(global.scoreboardX, global.scoreboardY, global.scoreboardW, global.scoreboardH/2) && global.menu >= 0){
		global.leaderboardPos-=floor(((global.scoreboardH)/15)/2);
		global.leaderboardPos = max(global.leaderboardPos, 0);
	}
	if(gp_button_check(global.scoreboardX, global.scoreboardY + global.scoreboardH/2, global.scoreboardW, global.scoreboardH/2-3) && global.menu >= 0){
		global.leaderboardPos+=floor(((global.scoreboardH)/15)/2);
		global.leaderboardPos = min(global.leaderboardPos, max(array_length(global.leaderboard)-floor((global.scoreboardH)/15), 0));
	}
	if(gp_button_check(global.scoreboardX + global.scoreboardW*4/5, 30 + global.scoreboardH, global.scoreboardW, -2 + 20 * global.scoreboardH/global.scoreboardMax) && global.menu >= 0 && global.leaderboardLoaded == 1){
		global.scoreboardType++;
		global.scoreboardType%=3;
		global.leaderboard = global.scoreboardType == 0 ? global.leaderboard1 : (global.scoreboardType == 1 ? global.leaderboard2 : (global.scoreboardType == 2 ? global.leaderboard3 : []));
	}
	if(gp_button_check(global.scoreboardX + global.scoreboardW/4, 35 + global.scoreboardH, global.scoreboardW/2, 13) && global.menu >= 0){
		global.leaderboardOpening = !global.leaderboardOpening;
	}
	if(global.leaderboardOpening){
		global.scoreboardH += (global.scoreboardMax - global.scoreboardH)/global.scoreboardSpeed;
		if(abs(global.scoreboardMax - global.scoreboardH) <= 16/global.scoreboardSpeed){global.scoreboardH = global.scoreboardMax;}
	}else{
		global.scoreboardH += (global.scoreboardMin - global.scoreboardH)/global.scoreboardSpeed;
		if(abs(global.scoreboardMin - global.scoreboardH) <= 16/global.scoreboardSpeed){global.scoreboardH = global.scoreboardMin;}
	}
	if(gp_button_check(global.weeklyCurrentX, global.weeklyCurrentY, weeklyCurrentW+weeklyCurrentLW*global.detailsWidth, (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight) + global.weeklyCurrentBH) && global.menu >= 0){
		global.descriptionOpening = !global.descriptionOpening;
	}
	if(global.descriptionOpening){
		global.weeklyCurrentY += (global.weeklyCurrentMax - global.weeklyCurrentY)/2;
		if(abs(global.weeklyCurrentMax - global.weeklyCurrentY) <= 8){global.weeklyCurrentY = global.weeklyCurrentMax;}
	}else{
		global.weeklyCurrentY += (-(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax) - global.weeklyCurrentY)/2;
		if(abs(-(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax) - global.weeklyCurrentY) <= 8){global.weeklyCurrentY = -(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax);}
	}
	if(gp_button_check(9,206,21,20) && global.menu >= 0 && global.recurrentNum < array_length((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))) - 1){
		global.recurrentNum++;
		global.leaderboardLoaded = 0;
		
		file_delete("Recurrent.txt");
		while (file_exists("Recurrent.txt")) {wait 1;}
		file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/" + "/PreviousWeeklies/" + (global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))[global.recurrentNum], "Recurrent.txt");
		while (!file_loaded("Recurrent.txt")) {wait 1;}
		global.details = string_replace_all(string_replace_all(string_split(string_split(string_load("Recurrent.txt"), "*/")[0], "/*")[1],chr(10),""),chr(13),"");
		if(array_length(string_split(string_load("Recurrent.txt"), "*/")) > 2){
			global.detailsFlavor = string_replace_all(string_replace_all(string_split(string_split(string_load("Recurrent.txt"), "*/")[1], "/*")[1],chr(10),""),chr(13),"");
		}else{
			global.detailsFlavor = "";
		}
		global.detailsHeight = string_count("#", global.details);
		global.detailsWidth = 0;
		var temp = string_split(global.details, "#");
		for(var i = 0; i < array_length(temp); i++){
			if(string_length(temp[i]) > global.detailsWidth){global.detailsWidth = string_length(temp[i]);}
		}
		file_unload("Recurrent.txt");
		if(!global.descriptionOpening){global.weeklyCurrentY = -(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax);}
		file_delete("dl.txt");
		while (file_exists("dl.txt")) {wait 1;}
		http_request('https://api.github.com/repos/GoldenEpsilon/NTT-Modded-Recurrents/contents/leaderboards/'+string_split((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))[global.recurrentNum], ".mod")[0] + ".txt"
		, "GET", global.headers,
		''
		, "dl.txt");
		while (!file_loaded("dl.txt")) {wait 1;}
		var dl = "";
		if(array_length(string_split(string_load("dl.txt"), chr(34)+"message"+chr(34)+":"+chr(34)+"Not Found"+chr(34))) == 1){dl = string_split(string_split(string_load("dl.txt"), chr(34)+","+chr(34)+"encoding"+chr(34)+":"+chr(34)+"base64"+chr(34))[0],chr(34)+"content"+chr(34)+":"+chr(34))[1];}
		file_unload("dl.txt");
		dl = string_replace_all(dl, "\" + "n", "");
		leaderboard = string_split(string_replace_all(base64Decode(dl), '/N', 'CORRUPTED NAME'), "|");
		updateLeaderboard(leaderboard);
		global.leaderboardLoaded = 1;
		global.scoreboardType = 0;
		file_unload("dl.txt");
		global.leaderboardPos = max(global.leaderboardPos, 0);
		global.leaderboardPos = min(global.leaderboardPos, max(array_length(global.leaderboard)-floor((global.scoreboardH)/15), 0));
	}
	if(gp_button_check(game_width - 32,206,21,20) && global.menu >= 0 && global.recurrentNum > 0){
		global.recurrentNum--;
		global.leaderboardLoaded = 0;
		
		file_delete("Recurrent.txt");
		while (file_exists("Recurrent.txt")) {wait 1;}
		file_download("https://raw.githubusercontent.com/GoldenEpsilon/NTT-Modded-Recurrents/master/" + "/PreviousWeeklies/" + (global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))[global.recurrentNum], "Recurrent.txt");
		while (!file_loaded("Recurrent.txt")) {wait 1;}
		global.details = string_replace_all(string_replace_all(string_split(string_split(string_load("Recurrent.txt"), "*/")[0], "/*")[1],chr(10),""),chr(13),"");
		if(array_length(string_split(string_load("Recurrent.txt"), "*/")) > 2){
			global.detailsFlavor = string_replace_all(string_replace_all(string_split(string_split(string_load("Recurrent.txt"), "*/")[1], "/*")[1],chr(10),""),chr(13),"");
		}else{
			global.detailsFlavor = "";
		}
		global.detailsHeight = string_count("#", global.details);
		global.detailsWidth = 0;
		var temp = string_split(global.details, "#");
		for(var i = 0; i < array_length(temp); i++){
			if(string_length(temp[i]) > global.detailsWidth){global.detailsWidth = string_length(temp[i]);}
		}
		file_unload("Recurrent.txt");
		if(global.recurrentNum > 0){
			if(!global.descriptionOpening){global.weeklyCurrentY = -(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax);}
			file_delete("dl.txt");
			while (file_exists("dl.txt")) {wait 1;}
			http_request('https://api.github.com/repos/GoldenEpsilon/NTT-Modded-Recurrents/contents/leaderboards/'+string_split((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))[global.recurrentNum], ".mod")[0] + ".txt"
			, "GET", global.headers,
			''
			, "dl.txt");
			while (!file_loaded("dl.txt")) {wait 1;}
			var dl = "";
			if(array_length(string_split(string_load("dl.txt"), chr(34)+"message"+chr(34)+":"+chr(34)+"Not Found"+chr(34))) == 1){dl = string_split(string_split(string_load("dl.txt"), chr(34)+","+chr(34)+"encoding"+chr(34)+":"+chr(34)+"base64"+chr(34))[0],chr(34)+"content"+chr(34)+":"+chr(34))[1];}
			file_unload("dl.txt");
			dl = string_replace_all(dl, "\" + "n", "");
			leaderboard = string_split(string_replace_all(base64Decode(dl), '/N', 'CORRUPTED NAME'), "|");
			updateLeaderboard(leaderboard);
			global.leaderboardLoaded = 1;
			global.scoreboardType = 0;
			file_unload("dl.txt");
			global.leaderboardPos = max(global.leaderboardPos, 0);
			global.leaderboardPos = min(global.leaderboardPos, max(array_length(global.leaderboard)-floor((global.scoreboardH)/15), 0));
		}else{
			if(!global.descriptionOpening){global.weeklyCurrentY = -(weeklyCurrentH+weeklyCurrentLH*global.detailsHeight-global.weeklyCurrentMax);}
			file_delete("dl.txt");
			while (file_exists("dl.txt")) {wait 1;}
			http_request('https://api.github.com/repos/GoldenEpsilon/NTT-Modded-Recurrents/contents/leaderboards/'+(global.menu == 0?'Weekly.txt':(global.menu == 1 ? 'Daily.txt' : 'Event.txt'))
			, "GET", global.headers,
			''
			, "dl.txt");
			while (!file_loaded("dl.txt")) {wait 1;}
			var dl = "";
			if(array_length(string_split(string_load("dl.txt"), chr(34)+"message"+chr(34)+":"+chr(34)+"Not Found"+chr(34))) == 1){dl = string_split(string_split(string_load("dl.txt"), chr(34)+","+chr(34)+"encoding"+chr(34)+":"+chr(34)+"base64"+chr(34))[0],chr(34)+"content"+chr(34)+":"+chr(34))[1];}
			file_unload("dl.txt");
			dl = string_replace_all(dl, "\" + "n", "");
			leaderboard = string_split(string_replace_all(base64Decode(dl), '/N', 'CORRUPTED NAME'), "|");
			updateLeaderboard(leaderboard);
			global.leaderboardLoaded = 1;
			global.scoreboardType = 0;
			file_unload("dl.txt");
			global.leaderboardPos = max(global.leaderboardPos, 0);
			global.leaderboardPos = min(global.leaderboardPos, max(array_length(global.leaderboard)-floor((global.scoreboardH)/15), 0));
		}
	}
}
//<GuiPack>
with(instances_matching(CustomObject, "GuiPack", "gp_ticker")){
	if("_x" not in self){_x = x}
	if("_y" not in self){_y = y}
	if("w" not in self){w = game_width - _x}
	if("text" not in self){text = ""}
	if("ticker_speed" not in self){ticker_speed = 0}
	if("offset" not in self){offset = current_frame}
	if("color" not in self){color = c_white}
	if("font" not in self){font = fntM0}
	if("fontWidth" not in self){fontWidth = 8}
	if("fontHeight" not in self){fontHeight = 8}
	if("h" not in self){h = _y + fontHeight}
	if("timing" not in self){timing = "draw_gui"}
}
//</GuiPack>
#define draw
//<GuiPack>
with(instances_matching(instances_matching(CustomObject, "GuiPack", "gp_ticker"), "timing", "draw")){
	gp_ticker(_x,_y,w,h,text,ticker_speed,offset,color,font,fontWidth,fontHeight);
}
//</GuiPack>
#define draw_gui
if(mod_sideload() && instance_exists(Menu)){
	var valign = draw_get_valign();
	var halign = draw_get_halign();
	draw_set_color(make_color_rgb(0,0,0));
	draw_roundrect(weeklyButtonX-5, 32, weeklyButtonX + weeklyButtonW+3, weeklyButtonY + weeklyButtonH+10, 0);
	draw_sprite_stretched(global.menu==0?global.sprWeekly:(global.menu==1?sprDailyChallengeOn:(global.menu==2?global.sprEvent:sprDailyChallengeOff)), point_in_rectangle(mouse_x[0] - view_xview[0], mouse_y[0] - view_yview[0], weeklyButtonX-5, 32, weeklyButtonX + weeklyButtonW+3, weeklyButtonY + weeklyButtonH+10), weeklyButtonX, weeklyButtonY, weeklyButtonW, weeklyButtonH);
	draw_roundrect(swapX - 5, 32, swapX + swapW + 5, swapY + swapH + 6, 0);
	var halign = draw_get_halign();
	draw_set_halign(1);
	draw_set_font(fntSmall);
	draw_set_color(point_in_rectangle(mouse_x[0] - view_xview[0], mouse_y[0] - view_yview[0], weeklyButtonX-5, 32, weeklyButtonX + weeklyButtonW+3, weeklyButtonY + weeklyButtonH+10)?make_color_rgb(255,255,255):make_color_rgb(100,100,100));
	draw_text(weeklyButtonX + weeklyButtonW/2, weeklyButtonY + weeklyButtonH + 1, "Play");
	draw_set_color(point_in_rectangle(mouse_x[0] - view_xview[0], mouse_y[0] - view_yview[0], swapX - 5, 32, swapX + swapW + 5, swapY + swapH + 6)?make_color_rgb(255,255,255):make_color_rgb(100,100,100));
	draw_text(swapX + swapW / 2 + 2, swapY + swapH - 4, global.menu==0?"Weekly":(global.menu==1?"Daily":(global.menu==2?"Event":"")));
	if(global.details != ""){
		draw_set_color(make_color_rgb(0,0,0));
		draw_roundrect(global.weeklyCurrentX, 0, global.weeklyCurrentX + (weeklyCurrentW+weeklyCurrentLW*global.detailsWidth), global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight)+global.weeklyCurrentBH, 0);
		draw_set_color(make_color_rgb(100,100,100));
		draw_rectangle(global.weeklyCurrentX+1, 0, global.weeklyCurrentX + (weeklyCurrentW+weeklyCurrentLW*global.detailsWidth), global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight)-1, 0);
		draw_set_color(point_in_rectangle(mouse_x[0] - view_xview[0], mouse_y[0] - view_yview[0], global.weeklyCurrentX, global.weeklyCurrentY, global.weeklyCurrentX+(weeklyCurrentW+weeklyCurrentLW*global.detailsWidth), global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight) + global.weeklyCurrentBH)?make_color_rgb(255,255,255):make_color_rgb(100,100,100));
		draw_text(global.weeklyCurrentX + (weeklyCurrentW+weeklyCurrentLW*global.detailsWidth)/2, global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight) + global.weeklyCurrentBH/2-2, string_copy("Description", 1, floor((weeklyCurrentW+weeklyCurrentLW*global.detailsWidth)/4)));
		draw_set_halign(halign);
		draw_set_font(fntSmall);
		draw_text_nt(global.weeklyCurrentX + (weeklyCurrentW+weeklyCurrentLW*global.detailsWidth)/20 + 1, global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight)/20 + 1, global.details);
		draw_set_color(make_color_rgb(0,0,0));
		draw_rectangle(global.weeklyCurrentX, 0, global.weeklyCurrentX + (weeklyCurrentW+weeklyCurrentLW*global.detailsWidth), 35, 0);
	}
	draw_set_color(make_color_rgb(100,100,100));
	draw_roundrect(global.scoreboardX + global.scoreboardW/4, 30 + global.scoreboardH, global.scoreboardX+global.scoreboardW*3/4, 48 + global.scoreboardH, 0);
	draw_roundrect(global.scoreboardX + global.scoreboardW*4/5, 30 + global.scoreboardH, global.scoreboardX+global.scoreboardW, 28 + global.scoreboardH + 20 * global.scoreboardH/global.scoreboardMax, 0);
	draw_set_valign(1);
	draw_set_halign(1);
	draw_set_font(fnt1);
	draw_text_nt(global.scoreboardX + global.scoreboardW*9/10 + 2, 21 + global.scoreboardH + 20 * global.scoreboardH/global.scoreboardMax, global.scoreboardType == 0 ? "All" : global.scoreboardType == 1 ? "Hig" : global.scoreboardType == 2 ? "1ST" : "");
	draw_roundrect(global.scoreboardX, 32 + global.scoreboardH, global.scoreboardX+global.scoreboardW, 35 + global.scoreboardH, 0);
	draw_set_color(make_color_rgb(150,150,150));
	draw_roundrect(global.scoreboardX + global.scoreboardW/2-10, 30 + global.scoreboardH, global.scoreboardX+global.scoreboardW/2+10, 46 + global.scoreboardH, 0);
	draw_set_color(make_color_rgb(0,0,0));
	draw_rectangle(global.scoreboardX, 30, global.scoreboardX+global.scoreboardW, 33 + global.scoreboardH, 0);
	draw_rectangle(global.scoreboardX, 0, global.scoreboardX+global.scoreboardW, 35, 0);
	draw_triangle(global.scoreboardX + global.scoreboardW/2-8, 37 + floor(global.scoreboardH), global.scoreboardX + global.scoreboardW/2+8, 37 + floor(global.scoreboardH), global.scoreboardX + global.scoreboardW/2, 45 + floor(global.scoreboardH), 0);
	if(global.leaderboardLoaded && array_length(global.leaderboard) > 0){
		draw_set_valign(0);
		draw_set_halign(0);
		draw_set_color(make_color_rgb(255,255,255));
		for(var i = 0; (i+global.leaderboardPos) < array_length(global.leaderboard) && i < floor((global.scoreboardH)/15); i++){
			draw_set_font(fnt1);
			draw_text_nt(global.scoreboardX + 1, global.scoreboardY + i*15, ((i+global.leaderboardPos) == 0 ? "@(color:"+string(make_color_rgb(255, 175, 0))+")" : (i+global.leaderboardPos)==1 ? "@(color:"+string(make_color_rgb(200, 200, 200))+")" : (i+global.leaderboardPos)==2 ? "@(color:"+string(make_color_rgb(150, 100, 0))+")" : "") + "\#" + string_copy(string(i+global.leaderboardPos+1), 1, floor((global.scoreboardW)/6) + (0 - string_length(string(i+global.leaderboardPos+1)))));
			draw_text_nt(global.scoreboardX + 35 - (10 * (2 - string_length(string(i+global.leaderboardPos+1)))), global.scoreboardY + i*15, ((i+global.leaderboardPos) == 0 ? "@(color:"+string(make_color_rgb(255, 175, 0))+")" : (i+global.leaderboardPos)==1 ? "@(color:"+string(make_color_rgb(200, 200, 200))+")" : (i+global.leaderboardPos)==2 ? "@(color:"+string(make_color_rgb(150, 100, 0))+")" : "") + string_copy(string(global.leaderboard[i+global.leaderboardPos][0]), 1, floor((global.scoreboardW)/6) + (-2 - string_length(string(i+global.leaderboardPos+1)))));
			draw_set_font(fntSmall);
			draw_text_nt(global.scoreboardX  + 37 - (10 * (2 - string_length(string(i+global.leaderboardPos+1)))), global.scoreboardY + i*15 + 9, string_copy("L: " + global.leaderboard[i+global.leaderboardPos][1] + " K: " + string(global.leaderboard[i+global.leaderboardPos][2]) + ((string_trim(global.leaderboard[i+global.leaderboardPos][3]) != "") ? (" C: " + global.leaderboard[i+global.leaderboardPos][3]) : ""), 1, floor((global.scoreboardW)/4) + (-5 - 2*string_length(string(i+global.leaderboardPos+1)))));
		}
	}else if(global.leaderboardOpening && !global.leaderboardLoaded){
		draw_set_valign(1);
		draw_set_halign(1);
		draw_set_font(fntM0);
		draw_set_color(make_color_rgb(255,255,255));
		draw_text_nt(global.scoreboardX + global.scoreboardW/2 + 1, global.scoreboardY + global.scoreboardH/2 + 1, "LOADING SCORES")
	}
	if(global.details != ""){
		temp = string_split(global.detailsFlavor, "|");
		for(var i = 0; i < array_length(temp); i++){
			temp2 = string_split(temp[i], "[")[0];
			if(array_length(string_split(global.details, temp2)) > 1){
				if(point_in_rectangle(mouse_x[0] - view_xview[0], mouse_y[0] - view_yview[0], global.weeklyCurrentX, global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight)/20 + 1 + array_length(string_split(string_split(global.details, temp2)[0], "#")) * 6 - 6, global.weeklyCurrentX + (weeklyCurrentW+weeklyCurrentLW*global.detailsWidth), global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight)/20 + 1 + array_length(string_split(string_split(global.details, temp2)[0], "#")) * 6) && array_length(string_split(temp[i], "[")) > 1){
					draw_set_font(fntSmall);
					draw_tooltip(global.weeklyCurrentX + (weeklyCurrentW+weeklyCurrentLW*global.detailsWidth)/2, global.weeklyCurrentY + (weeklyCurrentH+weeklyCurrentLH*global.detailsHeight)/20 + 1 + array_length(string_split(string_split(global.details, temp2)[0], "#")) * 6 - 6, string_split(string_split(temp[i], "[")[1], "]")[0]);
				}
			}
		}
	}
	if(global.menu >= 0 && array_length((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))) > 1){
		draw_set_color(make_color_rgb(50,50,50));
		if(global.recurrentNum < array_length((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))) - 1){draw_roundrect(9,205,30,225,0);}
		if(global.recurrentNum > 0){draw_roundrect(game_width - 32,205,game_width - 11,225,0);}
		draw_set_color(make_color_rgb(255,255,255));
		draw_set_valign(1);
		draw_set_halign(1);
		draw_set_font(fnt1);
		if(global.recurrentNum < array_length((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))) - 1){draw_text_nt(20, 216, "<<");}
		var Title = gp_month_name(string_split((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))[global.recurrentNum], "-")[1]) + " " + string_split((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))[global.recurrentNum], "-")[2] + ", " + string_split((global.menu==0?global.prevWeeklies:(global.menu==1?global.prevDailies:(global.menu==2?global.prevEvents:global.prevDailies)))[global.recurrentNum], "-")[0] + (global.recurrentNum == 0 ? " (Current)" : "");
		draw_text_nt(game_width / 2, 216, Title);
		if(global.recurrentNum > 0){draw_text_nt(game_width - 20, 216, ">>");}
	}
	draw_set_valign(valign);
	draw_set_halign(halign);
}
//<GuiPack>
with(instances_matching(instances_matching(CustomObject, "GuiPack", "gp_ticker"), "timing", "draw_gui")){
	gp_ticker(_x,_y,w,h,text,ticker_speed,offset,color,font,fontWidth,fontHeight);
}
//</GuiPack>
#define updateLeaderboard(str)
global.leaderboardExists = 1;
global.leaderboard = [];
for(var i = 1; i < array_length(str); i++){
	array_push(global.leaderboard, [string_split(str[i], ":")[0], string_split(string_split(str[i], "Area ")[1], "Kills")[0], real(string_split(string_split(str[i], "Character: ")[0], "Kills: ")[1]), array_length(string_split(str[i], "Character: ")) > 1 ? string_split(str[i], "Character: ")[1] : ""]);
}
global.leaderboard1 = array_clone(global.leaderboard);
array_sort_sub(global.leaderboard1, 2, 0);
global.leaderboard2 = [];
var temp = ds_map_create();
for(var i = 0; i < array_length(global.leaderboard); i++){
	if(is_undefined(ds_map_find_value(temp, global.leaderboard[i][0])) || !is_undefined(ds_map_find_value(temp, global.leaderboard[i][0])) && global.leaderboard[i][2] > ds_map_find_value(temp, global.leaderboard[i][0])[2]){
		ds_map_set(temp, global.leaderboard[i][0], global.leaderboard[i]);
	}
}
global.leaderboard2 = ds_map_values(temp);
array_sort_sub(global.leaderboard2, 2, 0);
ds_map_destroy(temp);
global.leaderboard3 = [];
temp = ds_map_create();
for(var i = 0; i < array_length(global.leaderboard); i++){
	if(is_undefined(ds_map_find_value(temp, global.leaderboard[i][0]))){
		ds_map_set(temp, global.leaderboard[i][0], 1);
		array_push(global.leaderboard3, global.leaderboard[i]);
	}
}
array_sort_sub(global.leaderboard3, 2, 0);
ds_map_destroy(temp);
global.leaderboard = global.leaderboard1;
#define base64Decode(str)
var retVal = "";
for(var i = 0; i < string_length(str)/4; i++){
	if(string_length(str)/4-i>=1){
		ord1 = base64CharDecode(string_char_at(str, (i*4)+1));
		ord2 = base64CharDecode(string_char_at(str, (i*4)+2));
		ord3 = base64CharDecode(string_char_at(str, (i*4)+3));
		ord4 = base64CharDecode(string_char_at(str, (i*4)+4));
		char1 = chr(ord1 * 4 + (ord2 & 48) / 16);
		char2 = chr((ord2 & 15) * 16 + (ord3 & 60)/4);
		char3 = chr((ord3&3)*64+ord4);
		retVal += string(char1)+string(char2)+string(char3);
	}
}
return retVal;
#define base64CharDecode(str)
var retVal = 0;
switch(str){
	case "A":retVal = 0;break;
	case "B":retVal = 1;break;
	case "C":retVal = 2;break;
	case "D":retVal = 3;break;
	case "E":retVal = 4;break;
	case "F":retVal = 5;break;
	case "G":retVal = 6;break;
	case "H":retVal = 7;break;
	case "I":retVal = 8;break;
	case "J":retVal = 9;break;
	case "K":retVal = 10;break;
	case "L":retVal = 11;break;
	case "M":retVal = 12;break;
	case "N":retVal = 13;break;
	case "O":retVal = 14;break;
	case "P":retVal = 15;break;
	case "Q":retVal = 16;break;
	case "R":retVal = 17;break;
	case "S":retVal = 18;break;
	case "T":retVal = 19;break;
	case "U":retVal = 20;break;
	case "V":retVal = 21;break;
	case "W":retVal = 22;break;
	case "X":retVal = 23;break;
	case "Y":retVal = 24;break;
	case "Z":retVal = 25;break;
	case "a":retVal = 26;break;
	case "b":retVal = 27;break;
	case "c":retVal = 28;break;
	case "d":retVal = 29;break;
	case "e":retVal = 30;break;
	case "f":retVal = 31;break;
	case "g":retVal = 32;break;
	case "h":retVal = 33;break;
	case "i":retVal = 34;break;
	case "j":retVal = 35;break;
	case "k":retVal = 36;break;
	case "l":retVal = 37;break;
	case "m":retVal = 38;break;
	case "n":retVal = 39;break;
	case "o":retVal = 40;break;
	case "p":retVal = 41;break;
	case "q":retVal = 42;break;
	case "r":retVal = 43;break;
	case "s":retVal = 44;break;
	case "t":retVal = 45;break;
	case "u":retVal = 46;break;
	case "v":retVal = 47;break;
	case "w":retVal = 48;break;
	case "x":retVal = 49;break;
	case "y":retVal = 50;break;
	case "z":retVal = 51;break;
	case "0":retVal = 52;break;
	case "1":retVal = 53;break;
	case "2":retVal = 54;break;
	case "3":retVal = 55;break;
	case "4":retVal = 56;break;
	case "5":retVal = 57;break;
	case "6":retVal = 58;break;
	case "7":retVal = 59;break;
	case "8":retVal = 60;break;
	case "9":retVal = 61;break;
	case "+":retVal = 62;break;
	case "/":retVal = 63;break;
}
return retVal;

//<GuiPack>
//A bunch of useful functions (mainly gui related) that I find useful
//You are free to use any part of GuiPack in your mods as long as you credit me (Golden Epsilon) in the code
/*OBJECTS (make a customObject and set name to the name in this list)
gp_ticker: x:number, y:number, w:number, h:number, text:string, ?speed:number, ?offset:number, ?color:color ?font:index, ?fontWidth:number, ?fontHeight:number
*/
/*FUNCTIONS
gp_ticker(x:number, y:number, w:number, h:number text:string, ?speed:number, ?offset:number, ?color:color ?font:index, ?fontWidth:number):
gp_button_check(x:number, y:number, w:number, h:number, ?hold:bool, ?index:number):
*/
#define cleanup
with(instances_matching(CustomObject, "GuiPack", "gp_ticker")){
instance_destroy();
}
#define gp_ticker
//_x,_y,_w,_h,text,?speed,?offset,?color,?font,?fontWidth,?fontHeight
if(argument_count >= 5){
	var valign = draw_get_valign();
	var halign = draw_get_halign();
	draw_set_valign(0);
	draw_set_halign(0);
	var _x = real(argument[0]);
	var _y = real(argument[1]);
	var _w = real(argument[2]);
	var _h = real(argument[3]);
	var text = string(argument[4]);
	var offset = 0;
	var color = draw_get_color();
	var font = fntM0;
	var fontWidth = 8;
	var fontHeight = 8;
	if(argument_count >= 7){offset = (current_frame-real(argument[6]))/real(argument[5]);}
	else if(argument_count >= 6){offset = current_frame/real(argument[5]);}
	if(argument_count >= 8){color = real(argument[7]);}
	if(argument_count >= 9){draw_set_font(argument[8]);}
	if(argument_count >= 10){fontWidth = real(argument[9]);}
	else{fontWidth = 8;}
	if(argument_count >= 11){fontHeight = real(argument[10]);}
	else{fontHeight = 8;}
	while((floor(_w/fontWidth) + string_length(string(argument[4])) + 1) * floor(_h/fontHeight) > string_length(text)){
		text += " " + string(argument[4]);
	}
	for(var i = 0; i < floor(_h/fontHeight); i++){
		draw_text_nt(_x - ((offset + _w/fontWidth * i)-floor(offset + _w/fontWidth * i))*fontWidth + fontWidth, _y + i*fontHeight, "@(color:"+string(color)+")" + string_copy(text, floor(offset + _w/fontWidth * i) % (string_length(string(argument[4])) + 1) + 1, floor(_w/fontWidth) - 1));
	}
	draw_set_valign(valign);
	draw_set_halign(halign);
}
#define gp_button_check
//x,y,w,h,?hold,?index
var retVal = false;
if(argument_count == 4 || (argument_count == 5 && argument[4] == 0)){
	var mouseX = mouse_x[0]-view_xview[0];
	var mouseY = mouse_y[0]-view_yview[0];
	var x = argument[0];
	var y = argument[1];
	var w = argument[2];
	var h = argument[3];
	for(var i = 0; i < 4; i++){
		var mouseX = mouse_x[i]-view_xview[i];
		var mouseY = mouse_y[i]-view_yview[i];
		if(!retVal){retVal = (button_pressed(i, "fire") && point_in_rectangle(mouseX,mouseY,x,y,x+w,y+h));}
	}
}else if(argument_count == 5){
	var mouseX = mouse_x[0]-view_xview[0];
	var mouseY = mouse_y[0]-view_yview[0];
	var x = argument[0];
	var y = argument[1];
	var w = argument[2];
	var h = argument[3];
	for(var i = 0; i < 4; i++){
		var mouseX = mouse_x[i]-view_xview[i];
		var mouseY = mouse_y[i]-view_yview[i];
		if(!retVal){retVal = (button_check(i, "fire") && point_in_rectangle(mouseX,mouseY,x,y,x+w,y+h));}
	}
}
else if(argument_count == 6 && argument[4] == 0){
	var mouseX = mouse_x[argument[5]]-view_xview[argument[5]];
	var mouseY = mouse_y[argument[5]]-view_yview[argument[5]];
	var x = argument[0];
	var y = argument[1];
	var w = argument[2];
	var h = argument[3];
	if(!retVal){retVal = (button_pressed(argument[5], "fire") && point_in_rectangle(mouseX,mouseY,x,y,x+w,y+h));}
}
else if(argument_count == 6){
	var mouseX = mouse_x[argument[5]]-view_xview[argument[5]];
	var mouseY = mouse_y[argument[5]]-view_yview[argument[5]];
	var x = argument[0];
	var y = argument[1];
	var w = argument[2];
	var h = argument[3];
	if(!retVal){retVal = (button_check(argument[5], "fire") && point_in_rectangle(mouseX,mouseY,x,y,x+w,y+h));}
}
return retVal;
#define gp_month_name(num)
var retVal = "";
var temp = floor(real(num));
switch(temp){
	case 1:retVal="January";break;
	case 2:retVal="Febuary";break;
	case 3:retVal="March";break;
	case 4:retVal="April";break;
	case 5:retVal="May";break;
	case 6:retVal="June";break;
	case 7:retVal="July";break;
	case 8:retVal="August";break;
	case 9:retVal="September";break;
	case 10:retVal="October";break;
	case 11:retVal="November";break;
	case 12:retVal="December";break;
}
return retVal;
//</GuiPack>